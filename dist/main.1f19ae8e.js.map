{"version":3,"sources":["../../src/browser.ts","../../src/math.ts","../../src/throttle.ts","../../src/base.ts","../../src/object.ts","../../src/element.ts","../../src/range.ts","../../src/resolver.ts","../../src/uid.ts","../../src/fetch.ts","../../src/url.ts","../../src/emitter.ts","../../src/utils.ts","../../src/index.ts","../../src/element/element-state.ts","../../src/viewport-observer.ts","../../src/element/element-observer.ts","../../src/easing.ts","../../src/tween.ts","../../src/dom.ts","../../src/core.ts","../../src/behaviors/bypassFocus.ts","../../src/utils/keyboard.ts","../../src/behaviors/bypassNative.ts","../../src/behaviors/clampContent.ts","../../src/behaviors/keyboard.ts","../../src/behaviors/lerpContent.ts","../../src/behaviors/mouseWheel.ts","../../src/behaviors/scrollTo.ts","../../src/behaviors/styleContainer.ts","../../src/behaviors/touchInertia.ts","../../src/behaviors/translate.ts","../../src/behaviors/tweenTo.ts","../../src/behaviors/nativeScrollbar.ts","../../src/scroller.ts","main.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Browser","uA","navigator","userAgent","toLowerCase","pf","platform","safari","test","this","safariVersion","match","replace","firefox","indexOf","chrome","ie","ieMobile","webkit","operaMini","edge","ios","mac","windows","android","androidMobile","blackberry","mobile","mouseWheelEvent","document","wheelEvent","keydownEvent","touchDevice","window","mutationObserver","client","mapRange","value","inStart","inEnd","outMin","outMax","clamp","min","max","Math","lerp","s","e","m","between","num","a","b","roundDec","precision","Number","round","cutDec","str","toString","parseFloat","substring","throttle","cb","ms","ctx","applyTimeout","lastTime","args","now","performance","Date","clearTimeout","setTimeout","apply","isDef","val","undefined","isNum","isStr","isArr","Array","isArray","isObj","type","isFunc","objectDeepMerge","target","sources","length","source","shift","key","Object","assign","[object Object]","objectDeepClone","obj","copy","attr","hasOwnProperty","objectValueByPath","path","separator","keys","split","last","getElementOffset","element","x","y","offsetLeft","offsetTop","offsetParent","Range","start","end","Resolver","promise","Promise","resolve","reject","_resolve","_reject","_completed","Error","completed","Uid","next","prefix","goFetch","input","init","controller","AbortController","fetch","signal","parser","parseUrl","url","createElement","href","protocol","host","hostname","port","pathname","search","hash","serializeUrl","EventEmitter","eventsOrName","dataOrCallback","callback","listenerCb","name","isEventMuted","i","len","emitters","emit","listeners","call","events","k","lenK","eventData","push","off","index","splice","event","mutedEvents","includes","forEach","unmuteEvents","listenEl","listener","options","t","addEventListener","removeEventListener","listenCompose","TickerThread","calllback","delta","time","kill","bind","dead","Ticker","minMaxFps","setMinFPS","setMaxFPS","requestAnimationFrame","fps","minFPS","maxFPS","maxDeltaMs","intervalMs","minDeltaMs","deadThreads","threads","thread","update","buryThread","deltaMs","tick","ticking","override","animate","ElementState","width","height","async","force","updateDimensions","destroyListeners","updateSize","updateOffset","hasChanged","emitChanges","changeListeners","size","offset","filter","item","_destroyed","destroyed","throttleTime","remove","removeListener","bounds","getBoundingClientRect","sum","changed","lastSum","scrollPosition","viewportSize","padding","prepos","above","below","left","right","inside","ViewportObserver","checkListeners","listening","_listening","attach","detach","attached","state","stateResolver","silent","_state","innerWidth","innerHeight","handleResize","cancelAnimationFrame","lastRafId","prevSum","getStateSum","resizeListener","elementObserverDefaultConfig","mutationThrottle","viewportThrottle","mutators","documentElement","characterData","childList","subtree","ElementObserver","config","default","observe","reset","states","register","checkStates","onDestroy","deregister","lastRaf","viewportObserver","throttleMs","MutationObserver","updateRaf","domContentLoadedListener","disconnect","Sine","in","c","d","cos","PI","out","sin","Expo","pow","Circ","sqrt","Bounce","none","Tween","values","registry","ticker","stableTarget","createThread","fromTarget","toValues","easing","easings.Circ","duration","paused","_paused","complete","_complete","passed","_passed","handleTick","currentTarget","progress","percent","on","delay","add","_delta","runCallback","tween","get","stop","delete","changes","from","to","change","getChanges","mutate","overwrite","overwriteTarget","set","firstTick","pause","createDelay","_time","processChanges","prop","targetTo","WeakMap","easingsMap","_easings","easingsFlatMap","ScrollerDomEvent","ScrollerEvent","ScrollerDom","super","dynamic","HTMLElement","observer","container","wrapper","RECALC","className","appendChild","rootElement","children","childNodes","append","removeChild","Scroller","dom","behaviors","Map","output","virtual","setBehavior","unlisten","updateDelta","DELTA","isLocked","availableBehaviors","_behavior","attachBehavior","attachedBehaviors","recalc","behavior","has","detachBehavior","virtPos","position","TRANSFORM_DELTA","newDelta","updatePosition","VIRTUAL","TRANSFORM_VIRTUAL","newPos","TRANSFORM_OUTPUT","hasEventListeners","updateOutput","pos","step","outPos","OUTPUT","enable","locks","unlock","skipOutputTransform","SCROLL_TO","TWEEN_TO","scroller","focusTarget","ignoreIn","ignoreInside","preventDefault","scrollLeft","scrollTop","activeEl","map","el","contains","targetSize","top","nativeTarget","scrollTo","getDeltaByKeyEvent","arrowDelta","pageDelta","spaceDelta","homeEndDelta","Infinity","defaultConfig","condition","cfg","self","detachedBehaviors","getPos","scrollX","scrollY","check","defPos","shallowStop","unlistenTween","fromTo","wSize","cSize","maxScrollX","maxScrollY","passive","eventName","damping","mobileDamping","outputX","outputY","diffX","abs","diffY","multiplier","multiplierFirefox","wheelDeltaX","deltaX","wheelDeltaY","deltaY","deltaMode","unmute","muteEvents","nativeBehavior","defaults","overflow","style","deltaMultiplier","velocityDamping","velocityMultiplier","minimumThreshold","doc","startPos","velocity","threshold","lastMove","down","getTouch","targetTouches","touch","pageX","pageY","deltaTime","firefoxFix","initialStyles","updateTransform","posX","posY","rotate","transform","currentTween","nativeKillEvents","contentSpan","parentElement","smoothScroll","clampContent","coreBehaviors.clampContent","tweenTo","coreBehaviors.tweenTo","coreBehaviors.scrollTo","bypassFocus","coreBehaviors.bypassFocus","focus","styleContainer","coreBehaviors.styleContainer","styles","touchInertia","coreBehaviors.touchInertia","lerpContent","coreBehaviors.lerpContent","mouseWheel","coreBehaviors.mouseWheel","mouse","translate","coreBehaviors.translate","keyboard","coreBehaviors.keyboard","nativeSmoothScroll","nativeScrollbar","coreBehaviors.nativeScrollbar","scrollbar","bypassNative","coreBehaviors.bypassNative","native","onload","console","log","mainEl","querySelector","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","location","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","concat","Function","deps","cached","cache","some"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["export class Browser {\n  public static get uA() {\n    return navigator.userAgent.toLowerCase();\n  }\n\n  public static get pf() {\n    return navigator.platform.toLowerCase();\n  }\n\n  public static get safari() {\n    return (/^((?!chrome|android).)*safari/).test(this.uA);\n  }\n\n  public static get safariVersion() {\n    return +(\n      this.uA.match(/version\\/[\\d\\.]+.*safari/) || ['-1']\n    )[0].replace(/^version\\//, '').replace(/ safari$/, '');\n  }\n\n  public static get firefox() {\n    return this.uA.indexOf('firefox') > -1;\n  }\n\n  public static get chrome() {\n    return (/chrome/).test(this.uA);\n  }\n\n  public static get ie() {\n    return (/msie|trident/).test(this.uA);\n  }\n\n  public static get ieMobile() {\n    return (/iemobile/).test(this.uA);\n  }\n\n  public static get webkit() {\n    return (/webkit/).test(this.uA);\n  }\n\n  public static get operaMini() {\n    return (/opera mini/).test(this.uA);\n  }\n\n  public static get edge() {\n    return (/edge\\/\\d./).test(this.uA);\n  }\n\n  public static get ios() {\n    return (/ip(hone|[ao]d)/).test(this.uA);\n  }\n\n  public static get mac() {\n    return this.pf.indexOf('mac') > -1;\n  }\n\n  public static get windows() {\n    return this.pf.indexOf('win') > -1;\n  }\n\n  public static get android() {\n    return (/android/).test(this.uA);\n  }\n\n  public static get androidMobile() {\n    return (/android.*mobile/).test(this.uA);\n  }\n\n  public static get blackberry() {\n    return (/blackberry/).test(this.uA);\n  }\n\n  public static get mobile() {\n    return this.ieMobile ||\n           this.blackberry ||\n           this.androidMobile ||\n           this.ios ||\n           this.operaMini;\n  }\n\n  /* istanbul ignore next */\n  public static get mouseWheelEvent() {\n    return 'onmousewheel' in document;\n  }\n\n  /* istanbul ignore next */\n  public static get wheelEvent() {\n    return 'onwheel' in document;\n  }\n\n  /* istanbul ignore next */\n  public static get keydownEvent() {\n    return 'onkeydown' in document;\n  }\n\n  /* istanbul ignore next */\n  public static get touchDevice() {\n    return 'ontouchstart' in window;\n  }\n\n  /* istanbul ignore next */\n  public static get mutationObserver() {\n    return 'MutationObserver' in window;\n  }\n\n  /* istanbul ignore next */\n  public static get client() {\n    return typeof window !== 'undefined' &&\n           typeof window.document !== 'undefined';\n  }\n}\n","export function mapRange(\n  value: number,\n  inStart: number,\n  inEnd: number,\n  outMin: number,\n  outMax: number,\n): number {\n  return outMin + (outMax - outMin) / (inEnd - inStart) * (value - inStart);\n}\n\nexport function clamp(\n  value: number,\n  min: number,\n  max: number,\n) {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function lerp(\n  s: number,\n  e: number,\n  m: number\n) {\n  return s * (1 - m) + e * m;\n}\n\nexport function between(num: number, a: number, b: number) {\n  return num > Math.min(a, b) && num < Math.max(a, b);\n}\n\nexport function roundDec(\n  value: number,\n  precision: number\n) {\n  return Number(\n    Math.round(value + ('e' as any) + precision) + 'e-' + precision\n  );\n}\n\nexport function cutDec(\n  value: number,\n  precision: number\n) {\n  const str = value.toString();\n\n  return parseFloat(str.substring(0, str.indexOf('.') + 1 + precision));\n}\n","export function throttle(\n  cb: Function,\n  ms: number = 0,\n  ctx?: any\n): (...args: any[]) => void {\n  let lastTime = 0;\n  let applyTimeout: any;\n\n  return (...args) => {\n    const now = (performance || /* istanbul ignore next */ Date).now();\n\n    if (lastTime && now < lastTime + ms) {\n      clearTimeout(applyTimeout);\n\n      applyTimeout = setTimeout(function () {\n        lastTime = now;\n        cb.apply(ctx, args);\n      }, ms);\n    } else {\n      lastTime = now;\n\n      cb.apply(ctx, args);\n    }\n  };\n}\n","type Value<T> = T | undefined | null | void;\n\nexport function isDef<T>(val: Value<T>): val is T {\n  return typeof val !== void 0 && val !== undefined;\n}\n\nexport function isNum<T>(val: Value<T>): val is T {\n  return typeof val === 'number';\n}\n\nexport function isStr<T>(val: Value<T>): val is T {\n  return typeof val === 'string';\n}\n\nexport function isArr<T>(val: Value<T>): val is T {\n  return Array.isArray(val);\n}\n\nexport function isObj<T>(val: Value<T>): val is T {\n  const type = typeof val;\n\n  return !isArr(val) && (\n    type === 'object' &&\n    val != null ||\n    type === 'function'\n  );\n}\n\nexport function isFunc<T>(val: Value<T>): val is T {\n  return typeof val === 'function';\n}\n\n","import { isObj } from './base';\n\ninterface DefaultObject {\n  [id: string]: any;\n}\n\nexport function objectDeepMerge<T extends DefaultObject>(\n  target: T,\n  ...sources: DefaultObject[]\n): T {\n  if ( ! sources.length) {\n    return target;\n  }\n\n  const source = sources.shift();\n\n  if (isObj(target) && isObj(source)) {\n    for (const key in source) {\n      if (isObj(source[key])) {\n        if ( ! target[key]) {\n          Object.assign(target, { [key]: {} });\n        }\n\n        objectDeepMerge(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return objectDeepMerge(target, ...sources);\n}\n\nexport function objectDeepClone<T extends DefaultObject>(obj: T): T {\n  if (isObj(obj)) {\n    const copy: { [attr: string]: any } = {};\n\n    for (const attr in obj) {\n      /* istanbul ignore else */\n      if (obj.hasOwnProperty(attr)) {\n        copy[attr] = objectDeepClone(obj[attr]);\n      }\n    }\n\n    return copy as T;\n  }\n\n  return obj;\n}\n\nexport function objectValueByPath<T extends DefaultObject>(\n  obj: T|undefined,\n  path: string,\n  separator: string = '.'\n): any {\n  const keys = path.split(separator);\n  let last = obj;\n\n  while (keys.length > 0) {\n    const key = keys.shift();\n\n    if (typeof last === 'object' && key) {\n      last = last[key];\n    } else {\n      last = undefined;\n      break;\n    }\n  }\n\n  return last;\n}\n","import { Coordinate } from './dimension';\n\nexport function getElementOffset(element: HTMLElement): Coordinate {\n  let x = 0;\n  let y = 0;\n\n  do {\n    x += element.offsetLeft || 0;\n    y += element.offsetTop || 0;\n    element = element.offsetParent as HTMLElement;\n  } while (element);\n\n  return { x, y };\n}\n","import { mapRange } from './math';\n\nexport class Range {\n  public start: number;\n  public end: number;\n\n  public constructor(\n    start: number,\n    end: number,\n  ) {\n    this.start = start > end ? end : start;\n    this.end = end > start ? end : start;\n  }\n\n  public mapTo(\n    val: number,\n    min: number = 0,\n    max: number = 1,\n  ) {\n    return mapRange(val, this.start, this.end, min, max);\n  }\n}\n","export class Resolver<T = void, E = T> {\n  public promise: Promise<T>;\n  private _resolve: (value: T) => void;\n  private _reject: (error: any) => void;\n  private _completed: boolean = false;\n\n  public constructor() {\n    this.promise = new Promise<T>((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  public resolve(value?: T) {\n    if (this._completed) {\n      throw new Error('Can\\'t resolve promise. Already completed');\n    }\n\n    this._completed = true;\n    this._resolve(value as T);\n\n    return this.promise;\n  }\n\n  public reject(value?: E) {\n    if (this._completed) {\n      throw new Error('Can\\'t reject promise. Already completed');\n    }\n\n    this._completed = true;\n    this._reject(value);\n\n    return this.promise;\n  }\n\n  public get completed() {\n    return this._completed;\n  }\n}\n","export class Uid {\n  private static next = 0;\n\n  public static reset() {\n    this.next = 0;\n  }\n\n  public static get(prefix = '') {\n    return prefix + (this.next++).toString(36);\n  }\n}\n","export type GoFetch = (\n  ReturnType<typeof fetch> & { controller: AbortController }\n);\n\nexport function goFetch(\n  input: RequestInfo,\n  init?: RequestInit\n) {\n  const controller = new AbortController();\n  const promise = fetch(\n    input,\n    Object.assign({ signal: controller.signal }, init)\n  ) as GoFetch;\n\n  promise.controller = controller;\n\n  return promise;\n}\n","import { Browser } from './browser';\n\nlet parser: HTMLAnchorElement;\n\nexport interface BrowserUrl {\n  protocol: string;\n  host: string;\n  hostname: string;\n  port: string;\n  pathname: string;\n  search: string;\n  hash: string;\n}\n\nexport function parseUrl(url: string): BrowserUrl {\n  if ( ! Browser.client) {\n    throw new Error('URL needs to be parse on the client side');\n  }\n\n  if ( ! parser) {\n    parser = document.createElement('a');\n  }\n\n  parser.href = url;\n\n  return {\n    protocol: parser.protocol,\n    host: parser.host,\n    hostname: parser.hostname,\n    port: parser.port,\n    pathname: parser.pathname,\n    search: parser.search,\n    hash: parser.hash\n  };\n}\n\nexport function serializeUrl(url: BrowserUrl) {\n  return `${url.protocol}//${url.host}${url.pathname}${url.search}${url.hash}`;\n}\n","import { Unlisten } from './utils';\n\nexport type EventListenerCb<T = any> = (data: T) => void;\nexport type ListenerCallback<T = any> = (...args: T[]) => void;\n\nexport class EventEmitter {\n  private listeners: { [name: string]: EventListenerCb[] } = {};\n  private emitters: EventEmitter[] = [];\n  private mutedEvents: string[] = [];\n\n  public emit<T = any, TC = T>(\n    eventsOrName: { [name: string]: T } | string,\n    dataOrCallback?: T | ListenerCallback<TC>,\n    callback: ListenerCallback<TC> = () => {}\n  ) {\n    const listenerCb = typeof dataOrCallback === 'function'\n      ? dataOrCallback as ListenerCallback<TC>\n      : callback;\n\n    if (typeof eventsOrName === 'string') {\n      const name = eventsOrName;\n\n      if ( ! this.isEventMuted(name)) {\n        for (let i = 0, len = this.emitters.length; i < len; i++) {\n          this.emitters[i].emit(eventsOrName, dataOrCallback, callback);\n        }\n\n        /* istanbul ignore else */\n        if (this.listeners.hasOwnProperty(name)) {\n          for (let i = 0, len = this.listeners[name].length; i < len; i++) {\n            listenerCb.call(\n              this,\n              this.listeners[name][i].call(\n                this,\n                dataOrCallback !== listenerCb\n                  ? dataOrCallback as T\n                  : undefined\n              ) as any\n            );\n          }\n        }\n      }\n    } else {\n      const events = eventsOrName;\n      const keys = Object.keys(events);\n\n      for (let k = 0, lenK = keys.length; k < lenK; k++) {\n        const name = keys[k];\n        const eventData = events[name];\n\n        /* istanbul ignore else */\n        if ( ! this.isEventMuted(name)) {\n          for (let i = 0, len = this.emitters.length; i < len; i++) {\n            this.emitters[i].emit(name, eventData, callback);\n          }\n\n          /* istanbul ignore else */\n          if (this.listeners.hasOwnProperty(name)) {\n            for (let i = 0, len = this.listeners[name].length; i < len; i++) {\n              listenerCb.call(\n                this,\n                this.listeners[name][i].call(this, eventData) as any\n              );\n            }\n          }\n        }\n      }\n    }\n\n    return this;\n  }\n\n  public on<T>(name: string, cb: EventListenerCb<T>): Unlisten {\n    if (this.listeners.hasOwnProperty(name)) {\n      this.listeners[name].push(cb);\n    } else {\n      this.listeners[name] = [ cb ];\n    }\n\n    return () => this.off(name, cb);\n  }\n\n  public off(name: string, cb: EventListenerCb) {\n    const listeners = this.listeners;\n\n    /* istanbul ignore else */\n    if (listeners.hasOwnProperty(name)) {\n      const index = listeners[name].indexOf(cb);\n\n      /* istanbul ignore else */\n      if (index > -1) {\n        listeners[name].splice(index, 1);\n      }\n    }\n  }\n\n  public hasEventListeners(name: string) {\n    return this.listeners[name] && this.listeners[name].length > 0;\n  }\n\n  public isEventMuted(event: string) {\n    return this.mutedEvents.includes(event);\n  }\n\n  public muteEvents(...events: (string|boolean)[]): Unlisten {\n    events.forEach(event => {\n      /* istanbul ignore else */\n      if (typeof event === 'string' && ! this.mutedEvents.includes(event)) {\n        this.mutedEvents.push(event);\n      }\n    });\n\n    return () => this.unmuteEvents(...events);\n  }\n\n  public unmuteEvents(...events: (string|boolean)[]) {\n    events.forEach(event => {\n      /* istanbul ignore else */\n      if (typeof event === 'string') {\n        const index = this.mutedEvents.indexOf(event);\n\n        /* istanbul ignore else */\n        if (index > -1) {\n          this.mutedEvents.splice(index, 1);\n        }\n      }\n    });\n  }\n\n  public reflectEvents(...emitters: EventEmitter[]) {\n    this.emitters = emitters;\n  }\n\n  public unreflectEvents() {\n    this.emitters = [];\n  }\n}\n","export type Unlisten = () => void;\n\nexport function listenCompose<T extends Unlisten | undefined>(\n  ...listeners: T[]\n): Unlisten {\n  return () => listeners.forEach(cb => (\n    typeof cb === 'function' && cb.call(undefined)\n  ));\n}\n","type TickerUpdateCallback = (\n  delta: number,\n  time: number,\n  kill: () => void\n) => void;\n\nexport class TickerThread {\n  public dead: boolean = false;\n\n  public constructor(\n    private calllback: TickerUpdateCallback\n  ) {}\n\n  public update(delta: number, time: number) {\n    this.calllback(delta, time, this.kill.bind(this));\n  }\n\n  public kill() {\n    this.dead = true;\n  }\n}\n\nexport class Ticker {\n  public readonly intervalMs = 60 / 1000;\n  public ticking = false;\n  public override = false;\n  private threads: TickerThread[] = [];\n  private lastTime = -1;\n  private minDeltaMs = 0;\n  private maxDeltaMs = 1000 / 10;\n\n  public constructor(minMaxFps?: number|[ number, number ]) {\n    if (minMaxFps instanceof Array && minMaxFps.length === 2) {\n      this.setMinFPS(minMaxFps[0]);\n      this.setMaxFPS(minMaxFps[1]);\n    }\n\n    if (typeof minMaxFps === 'number'){\n      this.setMaxFPS(minMaxFps);\n    }\n  }\n\n  public static requestAnimationFrame(callback: FrameRequestCallback) {\n    return window.requestAnimationFrame\n      ? window.requestAnimationFrame(callback)\n      : /* istanbul ignore next */ window.setTimeout(callback, 1000 / 60);\n  }\n\n  public static now(): number {\n    return (window.performance || /* istanbul ignore next */ Date).now();\n  }\n\n  public setMinFPS(fps: number) {\n    const minFPS = Math.max(Math.min(fps, this.maxFPS), 0);\n\n    return this.maxDeltaMs = 1 / Math.min(minFPS / 1000, this.intervalMs);\n  }\n\n  public get minFPS() {\n    return 1000 / this.maxDeltaMs;\n  }\n\n  public setMaxFPS(fps: number) {\n    if (fps === 0) {\n      return this.minDeltaMs = 0;\n    }\n\n    const maxFPS = Math.max(fps, this.minFPS);\n\n    return this.minDeltaMs = 1 / (maxFPS / 1000);\n  }\n\n  public get maxFPS() {\n    return this.minDeltaMs > 0\n      ? 1000 / this.minDeltaMs\n      : this.intervalMs * 1000;\n  }\n\n  public tick(delta: number, time: number = Ticker.now()) {\n    const deadThreads: Array<TickerThread> = [];\n\n    for (let i = 0, len = this.threads.length; i < len; i++) {\n      const thread = this.threads[i];\n\n      if (thread.dead) {\n        deadThreads.push(thread);\n      } else {\n        thread.update(delta, time);\n      }\n    }\n\n    for (let i = 0, len = deadThreads.length; i < len; i++) {\n      this.buryThread(deadThreads[i]);\n    }\n  }\n\n  public update(time = Ticker.now()) {\n    if (time > this.lastTime) {\n      let deltaMs = time - this.lastTime;\n\n      if (deltaMs > this.maxDeltaMs) {\n        deltaMs = this.maxDeltaMs;\n      }\n\n      if (this.minDeltaMs && deltaMs + 1 < this.minDeltaMs) {\n        return;\n      }\n\n      this.tick(deltaMs * this.intervalMs, time);\n    }\n\n    this.lastTime = time;\n  }\n\n  public animate() {\n    Ticker.requestAnimationFrame((time) => {\n      this.update(time);\n\n      if (this.ticking && ! this.override && this.threads.length > 0) {\n        this.animate();\n      } else {\n        this.ticking = false;\n      }\n    });\n  }\n\n  public kill() {\n    this.threads.forEach((thread) => thread.kill());\n  }\n\n  private buryThread(thread: TickerThread) {\n    this.threads.splice(this.threads.indexOf(thread), 1);\n  }\n\n  public add(callback: TickerUpdateCallback): TickerThread {\n    const thread = new TickerThread(callback);\n\n    this.threads.push(thread);\n\n    if ( ! this.ticking && ! this.override) {\n      this.lastTime = Ticker.now();\n      this.ticking = true;\n\n      this.animate();\n    }\n\n    return thread;\n  }\n}\n","import {\n  Browser, Coordinate, getElementOffset, Size, throttle,\n} from '@smoovy/utils';\n\nexport type StateChangeListener = (size: Size, offset: Coordinate) => void;\nexport type StateDestroyListener = () => void;\nexport interface StateChangeListenerRef {\n  remove: () => void;\n}\n\nexport class ElementState<T extends HTMLElement = HTMLElement> {\n  public size: Size = { width: 0, height: 0 };\n  public offset: Coordinate = { x: 0, y: 0 };\n  public element: T;\n  private _destroyed = false;\n  private changeListeners: StateChangeListener[] = [];\n  private destroyListeners: StateDestroyListener[] = [];\n  private lastSum = 0;\n\n  public constructor(element: T | ElementState) {\n    if (element instanceof ElementState) {\n      this.element = element.element as T;\n    } else {\n      this.element = element;\n    }\n  }\n\n  public update(\n    async = false,\n    force = false\n  ) {\n    if (async) {\n      setTimeout(() => this.updateDimensions(force));\n    } else {\n      this.updateDimensions(force);\n    }\n  }\n\n  public onDestroy(listener: StateDestroyListener) {\n    this.destroyListeners.push(listener);\n  }\n\n  private updateDimensions(force?: boolean) {\n    this.updateSize();\n    this.updateOffset();\n\n    if (this.hasChanged() ||force) {\n      this.emitChanges();\n    }\n  }\n\n  private emitChanges() {\n    for (let i = 0, len = this.changeListeners.length; i < len; i++) {\n      this.changeListeners[i].call(this, this.size, this.offset);\n    }\n  }\n\n  private removeListener(listener: StateChangeListener) {\n    this.changeListeners = this.changeListeners.filter(item => {\n      return item !== listener;\n    });\n  }\n\n  public destroy() {\n    this._destroyed = true;\n\n    for (let i = 0, len = this.destroyListeners.length; i < len; i++) {\n      this.destroyListeners[i].call(this);\n    }\n\n    this.changeListeners = [];\n    this.destroyListeners = [];\n  }\n\n  public get destroyed() {\n    return this._destroyed;\n  }\n\n  public changed(\n    listener: StateChangeListener,\n    throttleTime: number = 0\n  ) {\n    if (throttleTime > 0) {\n      listener = throttle(listener, throttleTime);\n    }\n\n    this.changeListeners.push(listener);\n\n    const ref: StateChangeListenerRef = {\n      remove: () => this.removeListener(listener)\n    };\n\n    return ref;\n  }\n\n  public updateSize() {\n    /* istanbul ignore else */\n    if (Browser.client) {\n      const bounds = this.element.getBoundingClientRect();\n\n      this.size.width = bounds.width;\n      this.size.height = bounds.height;\n    } else {\n      this.size.width = 0;\n      this.size.height = 0;\n    }\n  }\n\n  public updateOffset() {\n    /* istanbul ignore else */\n    if (Browser.client) {\n      const offset = getElementOffset(this.element);\n\n      this.offset.x = offset.x;\n      this.offset.y = offset.y;\n    } else {\n      this.offset.x = 0;\n      this.offset.y = 0;\n    }\n  }\n\n  public hasChanged() {\n    const sum = (\n      this.offset.x + this.offset.y +\n      this.size.width + this.size.height\n    );\n\n    const changed = sum !== this.lastSum;\n\n    this.lastSum = sum;\n\n    return changed;\n  }\n\n  public inViewport(\n    scrollPosition: Coordinate,\n    viewportSize: Size,\n    padding: Coordinate = { x: 0, y: 0 }\n  ) {\n    const offset = {  ...this.offset };\n    const prepos = {\n      above: offset.y + padding.y + this.size.height < scrollPosition.y,\n      below: offset.y - padding.y > scrollPosition.y + viewportSize.height,\n      left: offset.x + padding.x + this.size.width < scrollPosition.x,\n      right: offset.x - padding.x > scrollPosition.x + viewportSize.width,\n    };\n\n    return {\n      ...prepos,\n      inside: !prepos.above && !prepos.below && !prepos.right && !prepos.left\n    };\n  }\n}\n","import { throttle, Resolver, Browser } from '@smoovy/utils';\n\nexport type ViewportChangeListener = (state: ViewportState) => void;\n\nexport interface ViewportState {\n  width: number;\n  height: number;\n}\n\nexport interface ViewportObservable {\n  remove: () => void;\n}\n\nexport class ViewportObserver {\n  private static _listening = false;\n  private static _state: ViewportState = { width: 0, height: 0 };\n  private static lastRafId: number = -1;\n  private static resizeListener?: EventListenerOrEventListenerObject;\n  private static listeners: ViewportChangeListener[] = [];\n  private static stateResolver = new Resolver<ViewportState>();\n\n  public static changed(\n    listener: ViewportChangeListener,\n    throttleTime: number = 0\n  ): ViewportObservable {\n    if (throttleTime > 0) {\n      listener = throttle(listener, throttleTime);\n    }\n\n    this.listeners.push(listener);\n    this.checkListeners();\n\n    return {\n      remove: () => this.removeListener(listener),\n    };\n  }\n\n  private static removeListener(listener: ViewportChangeListener) {\n    const index = this.listeners.indexOf(listener);\n\n    /* istanbul ignore else */\n    if (index > -1) {\n      this.listeners.splice(index, 1);\n      this.checkListeners();\n    }\n  }\n\n  private static checkListeners() {\n    this.listening = this.listeners.length > 0;\n  }\n\n  private static set listening(listening: boolean) {\n    /* istanbul ignore else */\n    if (listening && ! this._listening) {\n      this.attach();\n    } else if ( ! listening && this._listening) {\n      this.detach();\n    }\n\n    this._listening = listening;\n  }\n\n  public static get attached() {\n    return this._listening;\n  }\n\n  public static get state() {\n    return this.stateResolver.promise;\n  }\n\n  public static update(\n    force = false,\n    silent = false\n  ) {\n    /* istanbul ignore else */\n    if (Browser.client) {\n      this._state.width = window.innerWidth;\n      this._state.height = window.innerHeight;\n    }\n\n    if ( ! this.stateResolver.completed) {\n      this.stateResolver.resolve(this._state);\n    }\n\n    if ( ! silent) {\n      this.handleResize(force);\n    }\n  }\n\n  private static getStateSum() {\n    return this._state.width + this._state.height;\n  }\n\n  private static handleResize(force = false)  {\n    cancelAnimationFrame(this.lastRafId);\n\n    const prevSum = this.getStateSum();\n\n    this.lastRafId = requestAnimationFrame(() => {\n      this.update();\n\n      if (prevSum !== this.getStateSum() || true ===force) {\n        for (let i = 0, len = this.listeners.length; i < len; i++) {\n          this.listeners[i].call(this, this._state);\n        }\n      }\n    });\n  }\n\n  private static attach() {\n    /* istanbul ignore else */\n    if ( ! this.resizeListener) {\n      this.handleResize();\n\n      /* istanbul ignore next */\n      this.resizeListener = () => this.handleResize();\n\n      /* istanbul ignore else */\n      if (Browser.client) {\n        window.addEventListener('resize', this.resizeListener, true);\n      }\n    }\n  }\n\n  private static detach() {\n    /* istanbul ignore else */\n    if (this.resizeListener) {\n      /* istanbul ignore else */\n      if (Browser.client) {\n        window.removeEventListener('resize', this.resizeListener, true);\n      }\n\n      this.resizeListener = undefined;\n    }\n  }\n}\n","import { Browser, throttle } from '@smoovy/utils';\n\nimport { ViewportObservable, ViewportObserver } from '../viewport-observer';\nimport { ElementState } from './element-state';\n\nexport interface ElementObserverMutator {\n  target?: HTMLElement;\n  options?: MutationObserverInit;\n}\n\nexport interface ElementObserverConfig {\n  mutationThrottle?: number;\n  viewportThrottle?: number;\n  mutators?: ElementObserverMutator[];\n}\n\n/* istanbul ignore next */\nexport const elementObserverDefaultConfig: ElementObserverConfig = {\n  mutationThrottle: 100,\n  viewportThrottle: 100,\n  mutators: [\n    {\n      target: Browser.client ? document.documentElement : undefined,\n      options: {\n        characterData: true,\n        childList: true,\n        subtree: true\n      }\n    }\n  ]\n};\n\nexport class ElementObserver {\n  public static default = new ElementObserver(elementObserverDefaultConfig);\n  private lastRaf: number;\n  private attached = false;\n  private viewportObserver?: ViewportObservable;\n  private mutationObserver?: MutationObserver;\n  private states: ElementState[] = [];\n\n  public constructor(\n    private config: ElementObserverConfig = {}\n  ) {}\n\n  public static observe(element: HTMLElement | ElementState) {\n    return this.default.observe(element);\n  }\n\n  public static reset() {\n    return this.default.reset();\n  }\n\n  public observe(element: HTMLElement | ElementState) {\n    for (let i = 0, len = this.states.length; i < len; i++) {\n      /* istanbul ignore else */\n      if (this.states[i] === element || this.states[i].element === element) {\n        return this.states[i];\n      }\n    }\n\n    return this.register(\n      element instanceof ElementState ? element : new ElementState(element)\n    );\n  }\n\n  private register(state: ElementState) {\n    this.states.push(state);\n    this.checkStates();\n\n    state.update(true);\n    state.onDestroy(() => this.deregister(state));\n\n    return state;\n  }\n\n  private deregister(state: ElementState) {\n    const index = this.states.indexOf(state);\n\n    /* istanbul ignore else */\n    if (index > -1) {\n      this.states.splice(index, 1);\n      this.checkStates();\n    }\n  }\n\n  public reset() {\n    this.states.forEach(state => this.deregister(state));\n  }\n\n  public updateRaf() {\n    /* istanbul ignore else */\n    if (Browser.client) {\n      cancelAnimationFrame(this.lastRaf);\n\n      this.lastRaf = requestAnimationFrame(() => this.update());\n    } else {\n      this.update();\n    }\n  }\n\n  public update(async = false) {\n    for (let i = 0, len = this.states.length; i < len; i++) {\n      this.states[i].update(async);\n    }\n  }\n\n  private attach() {\n    this.attached = true;\n    this.viewportObserver = ViewportObserver.changed(\n      /* istanbul ignore next */\n      typeof this.config.viewportThrottle === 'number'\n        ? throttle(() => this.update(), this.config.viewportThrottle)\n        : () => this.update()\n    );\n\n    /* istanbul ignore next */\n    if (Browser.client && Browser.mutationObserver && this.config.mutators) {\n      const throttleMs = this.config.mutationThrottle;\n\n      this.mutationObserver = new MutationObserver(\n        typeof throttleMs === 'number'\n          ? throttle(() => this.updateRaf(), throttleMs)\n          : () => this.updateRaf()\n      );\n\n      this.config.mutators.forEach(config => {\n        if (config.target && this.mutationObserver) {\n          this.mutationObserver.observe(config.target, {...config.options  });\n        }\n      });\n    }\n\n    let domContentLoadedListener: EventListenerOrEventListenerObject;\n\n    /* istanbul ignore next */\n    if (Browser.client) {\n      document.addEventListener(\n        'DOMContentLoaded',\n        domContentLoadedListener = () => {\n          this.updateRaf();\n\n          document.removeEventListener(\n            'DOMContentLoaded',\n            domContentLoadedListener\n          );\n        },\n        false\n      );\n    }\n\n    this.updateRaf();\n  }\n\n  private detach() {\n    this.attached = false;\n\n    /* istanbul ignore next */\n    if (this.viewportObserver) {\n      this.viewportObserver.remove();\n      this.viewportObserver = undefined;\n    }\n\n    /* istanbul ignore next */\n    if (this.mutationObserver) {\n      this.mutationObserver.disconnect();\n      this.mutationObserver = undefined;\n    }\n  }\n\n  private checkStates() {\n    if (this.states.length > 0 && ! this.attached) {\n      this.attach();\n    }\n\n    if (this.states.length === 0 && this.attached) {\n      this.detach();\n    }\n  }\n}\n","export type EasingImplementation =\n  ((t: number, b: number, c: number, d: number) => number) |\n  ((t: number, b: number, c: number, d: number, s?: number) => number);\n\n/* istanbul ignore next */\nexport const Linear = {\n  none: (t: number, b: number, c: number, d: number): number => {\n    return c * t / d + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Quad = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return -c * (t /= d) * (t - 2) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Cubic = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Quart = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t * t * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Quint = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Sine = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Expo = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return (t === 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return (t === d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Circ = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Back = {\n  in: (\n    t: number,\n    b: number,\n    c: number,\n    d: number,\n    s: number = 1.70158\n  ): number => {\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  out: (\n    t: number,\n    b: number,\n    c: number,\n    d: number,\n    s: number = 1.70158\n  ): number => {\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Bounce = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c - Bounce.out(d - t, 0, c, d) + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    if ((t /= d) < (1 / 2.75)) {\n        return c * (7.5625 * t * t) + b;\n    } else if (t < (2 / 2.75)) {\n        return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;\n    } else if (t < (2.5 / 2.75)) {\n        return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;\n    } else {\n        return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;\n    }\n  }\n};\n","import { Ticker, TickerThread } from '@smoovy/ticker';\n\nimport * as easings from './easing';\nimport { EasingImplementation } from './easing';\n\nexport interface TweenTarget {\n  [key: string]: number|any;\n}\n\nexport interface TweenCallbacks<V> {\n  stop: () => void;\n  pause: () => void;\n  start: () => void;\n  reset: () => void;\n  delay: (passed: number) => void;\n  update: (values: V, progress: number) => void;\n  overwrite: () => void;\n  complete: () => void;\n}\n\nexport interface TweenOptions<V> {\n  easing: EasingImplementation;\n  delay: number;\n  duration: number;\n  mutate: boolean;\n  paused: boolean;\n  overwrite: boolean;\n  on: Partial<TweenCallbacks<V>>;\n}\n\nfunction getChanges<T extends TweenTarget>(\n  from: T,\n  to: Partial<T>\n) {\n  const changes = {} as typeof to;\n\n  for (const key in from) {\n    if (from.hasOwnProperty(key) && to.hasOwnProperty(key)) {\n      const change = (to[key] as number) - from[key];\n\n      if (change !== 0){\n        changes[key] = change as any;\n      }\n    }\n  }\n\n  return changes;\n}\n\nexport class Tween<T extends TweenTarget = any> {\n  public static ticker = new Ticker();\n  private static registry = new WeakMap<TweenTarget, Tween>();\n  private registry = Tween.registry;\n  private ticker = Tween.ticker;\n  private thread?: TickerThread;\n  private delay?: TickerThread;\n  private changes: Partial<T> = {};\n  private stableTarget: T;\n  private currentTarget: T;\n  private firstTick = false;\n  private _paused = false;\n  private _complete = false;\n  private _passed = 0;\n\n  public constructor(\n    public target: T,\n    public values: Partial<T>,\n    protected options: Partial<TweenOptions<T>>\n  ) {\n    this.stableTarget = { ...target };\n\n    this.createThread();\n  }\n\n  public static fromTo<T extends TweenTarget>(\n    fromTarget: T,\n    toValues: Partial<T>,\n    options: Partial<TweenOptions<T>> = {}\n  ): Tween<T> {\n    return new Tween(fromTarget, toValues, options);\n  }\n\n  public get easing() {\n    return this.options.easing ||easings.Circ.out;\n  }\n\n  public get duration() {\n    return typeof this.options.duration === 'number'\n      ? this.options.duration\n      : 100;\n  }\n\n  public get paused() {\n    return this._paused;\n  }\n\n  public get complete() {\n    return this._complete;\n  }\n\n  public get passed() {\n    return this._passed;\n  }\n\n  public set passed(ms: number) {\n    this._passed = Math.min(ms, this.duration);\n\n    this.handleTick(this.currentTarget);\n  }\n\n  public get progress() {\n    return this.passed / this.duration;\n  }\n\n  public set progress(percent: number) {\n    this.passed = this.duration * percent;\n  }\n\n  private  runCallback<V>(\n    name: keyof TweenCallbacks<V>,\n    ...args: any[]\n  ) {\n    if (this.options.on && typeof this.options.on[name] === 'function') {\n      (this.options.on[name] as any).apply(this, args);\n    }\n  }\n\n  private createDelay(ms: number) {\n    const start = Ticker.now();\n\n    return this.delay = this.ticker.add(\n      (_delta, time, kill) => {\n        if (this._paused) {\n          return;\n        }\n\n        const passed = time - start;\n\n        if (passed >= ms) {\n          this.runCallback('delay', ms);\n          delete this.delay;\n          kill();\n        } else {\n          this.runCallback('delay', passed);\n        }\n      }\n    );\n  }\n\n  private overwriteTarget(target: T) {\n    const tween = this.registry.get(target);\n\n    if (tween instanceof Tween) {\n      tween.stop();\n      this.registry.delete(target);\n      this.runCallback('overwrite');\n    }\n  }\n\n  private createThread()  {\n    if (this.thread && ! this.thread.dead) {\n      this.thread.kill();\n    }\n\n    this.changes = getChanges(this.target, this.values);\n    this.currentTarget = this.options.mutate === false\n    ? { ...this.target }\n    : this.target;\n\n    const changed = Object.keys(this.changes).length !== 0;\n\n    if (this.options.overwrite !== false) {\n      this.overwriteTarget(this.target);\n    }\n\n    this.registry.set(this.target, this);\n    this.firstTick = true;\n    this._complete = false;\n    this._passed = 0;\n\n    if (this.options.paused === true) {\n      this.pause();\n    }\n\n    if (this.delay) {\n      this.delay.kill();\n      delete this.delay;\n    }\n\n    if (typeof this.options.delay === 'number') {\n      this.runCallback('update', this.currentTarget, this.progress);\n      this.createDelay(this.options.delay);\n    }\n\n    return this.thread = this.ticker.add((delta, _time, kill) => {\n      if (this._paused || this.delay) {\n        return;\n      }\n\n      if ( ! changed) {\n        kill();\n        return;\n      }\n\n      this.passed += delta / Tween.ticker.intervalMs;\n    });\n  }\n\n  private handleTick(target: T) {\n    if (this.firstTick) {\n      this.runCallback('start');\n      this.firstTick = false;\n    }\n\n    /* istanbul ignore else */\n    if (this.passed >= 0) {\n      this.processChanges(target, (prop) => this.easing.call(\n        this,\n        this._passed,\n        this.stableTarget[prop],\n        this.changes[prop] as number,\n        this.duration\n      ));\n    }\n\n    /* istanbul ignore else */\n    if (this._passed >= 0 && this._passed >= this.duration) {\n      /* istanbul ignore else */\n      if (this.thread && ! this.thread.dead) {\n        this.thread.kill();\n      }\n\n      this.processChanges(target, (prop) => this.values[prop] as number);\n      this.runCallback('complete');\n\n      this._complete = true;\n    }\n  }\n\n  private processChanges(\n    targetTo: T,\n    value: (key: string) => number\n  ) {\n    for (const prop in this.changes) {\n      /* istanbul ignore else */\n      if (this.changes.hasOwnProperty(prop)) {\n        targetTo[prop] = value(prop) as any;\n      }\n    }\n\n    this.runCallback('update', targetTo, this.progress);\n  }\n\n  public stop() {\n    if (this.thread && ! this.thread.dead) {\n      this.thread.kill();\n\n      this.runCallback('stop');\n    }\n\n    return this;\n  }\n\n  public start() {\n    if (this._paused) {\n      this._paused = false;\n\n      /* istanbul ignore else */\n      if (this.thread && ! this.thread.dead) {\n        this.runCallback('start');\n      }\n    }\n\n    return this;\n  }\n\n  public pause() {\n    if ( ! this._paused) {\n      this._paused = true;\n\n      if (this.thread && ! this.thread.dead) {\n        this.runCallback('pause');\n      }\n    }\n\n    return this;\n  }\n\n  public reset() {\n    if (this.options.mutate !== false) {\n      for (const x in this.stableTarget) {\n        /* istanbul ignore else */\n        if (this.stableTarget.hasOwnProperty(x)) {\n          this.target[x] = this.stableTarget[x];\n        }\n      }\n    }\n\n    this.runCallback('reset');\n    this.createThread();\n\n    return this;\n  }\n}\n","import { EventEmitter } from '@smoovy/event';\nimport {\n  ElementObserver, ElementObserverConfig, ElementState,\n} from '@smoovy/observer';\n\nexport interface ScrollerDomElement {\n  container: HTMLElement | ElementState;\n  wrapper: HTMLElement | ElementState;\n}\n\nexport interface ScrollerDomConfig {\n  observer?: ElementObserverConfig | false;\n  element: HTMLElement | ScrollerDomElement;\n}\n\nexport enum ScrollerDomEvent {\n  RECALC = 'recalc'\n}\n\nexport class ScrollerDom extends EventEmitter {\n  public container: ElementState;\n  public wrapper: ElementState;\n  public observer: ElementObserver;\n  private dynamic = false;\n\n  public constructor(protected config: ScrollerDomConfig) {\n    super();\n\n    this.dynamic = config.element instanceof HTMLElement;\n\n    if (config.observer !== false) {\n      this.observer = new ElementObserver(config.observer);\n    }\n\n    this.container = new ElementState(this.dynamic\n      ? document.createElement('div')\n      : (config.element as ScrollerDomElement).container\n    );\n\n    this.wrapper = new ElementState(this.dynamic\n      ? document.createElement('div')\n      : (config.element as ScrollerDomElement).wrapper\n    );\n\n    if (this.observer) {\n      this.container = this.observer.observe(this.container);\n      this.wrapper = this.observer.observe(this.wrapper);\n\n      this.wrapper.changed(() => this.emit(ScrollerDomEvent.RECALC));\n      this.container.changed(() => this.emit(ScrollerDomEvent.RECALC));\n    }\n\n    if (this.dynamic) {\n      this.container.element.className += 'smoovy-container';\n      this.wrapper.element.className += 'smoovy-wrapper';\n\n      this.container.element.appendChild(this.wrapper.element);\n    }\n  }\n\n  public recalc(async = false) {\n    this.wrapper.update(async);\n    this.container.update(async);\n  }\n\n  public attach() {\n    if (this.dynamic) {\n      const rootElement = this.config.element as HTMLElement;\n      const children = Array.from(rootElement.childNodes);\n\n      rootElement.appendChild(this.container.element);\n      this.wrapper.element.append(...children);\n    }\n  }\n\n  public detach() {\n    if (this.dynamic) {\n      const rootElement = this.config.element as HTMLElement;\n      const children = Array.from(this.wrapper.element.childNodes);\n\n      rootElement.append(...children);\n      rootElement.removeChild(this.container.element);\n    }\n  }\n}\n","import {\n  EventEmitter, EventListenerCb, listenCompose, Unlisten,\n} from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\nimport { TweenOptions } from '@smoovy/tween';\nimport { Coordinate, isNum } from '@smoovy/utils';\n\nimport { ScrollerDom, ScrollerDomConfig, ScrollerDomEvent } from './dom';\n\nexport type ScrollBehavior<C = any> = (config?: C) => ScrollBehaviorItem;\nexport type ScrollBehaviorItemDetach = (() => void)|void;\nexport type ScrollBehaviorItem<S extends Scroller = Scroller> =\n  (scroller: S) => ScrollBehaviorItemDetach;\n\nexport interface ScrollerPosition {\n  virtual: Coordinate;\n  output: Coordinate;\n}\n\nexport type DeltaTransformCallback = (delta: Coordinate) => Coordinate;\nexport type VirtualTransformCallback = (pos: Coordinate) => Coordinate;\nexport interface OutputTransformEvent {\n  pos: Coordinate;\n  step: (pos: Coordinate) => void;\n}\n\nexport interface TweenToEvent {\n  pos: Partial<Coordinate>;\n  options: Partial<\n    Pick<TweenOptions<any>, 'duration' | 'easing'> &\n    { force: boolean }\n  >;\n}\n\nexport interface ScrollToEvent {\n  pos: Partial<Coordinate>;\n  skipOutputTransform: boolean;\n}\n\nexport enum ScrollerEvent {\n  DELTA = 'delta',\n  OUTPUT = 'output',\n  VIRTUAL = 'virtual',\n  RECALC = 'recalc',\n  TWEEN_TO = 'tween_to',\n  SCROLL_TO = 'scroll_to',\n  TRANSFORM_DELTA = '~delta',\n  TRANSFORM_VIRTUAL = '~virtual',\n  TRANSFORM_OUTPUT = '~output'\n}\n\nexport type ScrollerDomType = HTMLElement | ScrollerDomConfig | ScrollerDom;\n\nexport class Scroller extends EventEmitter {\n  private attached = false;\n  private locks: string[] = [];\n  private availableBehaviors = new Map<string, ScrollBehaviorItem>();\n  private attachedBehaviors = new Map<string, ScrollBehaviorItemDetach>();\n  private unlisten: Unlisten;\n  public dom: ScrollerDom;\n  public position: ScrollerPosition = {\n    output: { x: 0, y: 0 },\n    virtual: { x: 0, y: 0 }\n  };\n\n  public constructor(\n    dom: ScrollerDomType,\n    behaviors: { [name: string]: ScrollBehaviorItem }\n  ) {\n    super();\n\n    if (dom instanceof ScrollerDom) {\n      this.dom = dom;\n    } else {\n      this.dom = new ScrollerDom(\n        dom instanceof HTMLElement\n          ? { element: dom }\n          : dom\n      );\n    }\n\n    for (const name in behaviors) {\n      if (behaviors.hasOwnProperty(name)) {\n        this.setBehavior(name, behaviors[name]);\n      }\n    }\n\n    this.attach();\n  }\n\n  private attach() {\n    if ( ! this.attached) {\n      this.attached = true;\n      this.unlisten = listenCompose(\n        this.dom.on<Coordinate>(ScrollerDomEvent.RECALC, () => {\n          this.updateDelta({ x: 0, y: 0 });\n          Ticker.requestAnimationFrame(() => this.emit(ScrollerEvent.RECALC));\n        }),\n        this.on<Coordinate>(ScrollerEvent.DELTA, (delta) => {\n          if ( ! this.isLocked()) {\n            this.updateDelta(delta);\n          }\n        })\n      );\n\n      this.dom.attach();\n      this.availableBehaviors.forEach((_behavior, key) => {\n        this.attachBehavior(key);\n      });\n    }\n  }\n\n  public destroy() {\n    if (this.attached) {\n      this.attached = false;\n\n      if (typeof this.unlisten === 'function') {\n        this.unlisten();\n        delete this.unlisten;\n      }\n\n      this.dom.detach();\n      this.attachedBehaviors.forEach(detach => {\n        if (typeof detach === 'function') {\n          detach.call(this);\n        }\n      });\n    }\n  }\n\n  public recalc(async = false) {\n    this.dom.recalc(async);\n\n    if (async) {\n      Ticker.requestAnimationFrame(() => this.emit(ScrollerEvent.RECALC));\n    } else {\n      this.emit(ScrollerEvent.RECALC);\n    }\n  }\n\n  public get behaviors() {\n    return this.availableBehaviors;\n  }\n\n  public setBehavior(\n    name: string,\n    behavior: ScrollBehaviorItem\n  ) {\n    this.availableBehaviors.set(name, behavior);\n  }\n\n  public deleteBehavior(name: string) {\n    if (this.attachedBehaviors.has(name)) {\n      this.detachBehavior(name);\n    }\n\n    return this.availableBehaviors.delete(name);\n  }\n\n  public attachBehavior(name: string) {\n    const behavior = this.availableBehaviors.get(name);\n\n    if (behavior && ! this.attachedBehaviors.get(name)) {\n      this.attachedBehaviors.set(name, behavior(this));\n\n      return true;\n    }\n\n    return false;\n  }\n\n  public detachBehavior(name: string) {\n    const detach = this.attachedBehaviors.get(name);\n\n    if (detach) {\n      detach.call(this);\n      this.attachedBehaviors.delete(name);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  public updateDelta<T extends Partial<Coordinate>>(delta: T) {\n    const virtPos = this.position.virtual;\n\n    this.emit<T>(\n      ScrollerEvent.TRANSFORM_DELTA,\n      delta,\n      (newDelta) => {\n        delta.x = newDelta.x;\n        delta.y = newDelta.y;\n      }\n    );\n\n    this.updatePosition({\n      x: isNum(delta.x) ? virtPos.x - (delta.x as number) : undefined,\n      y: isNum(delta.y) ? virtPos.y - (delta.y as number) : undefined\n    });\n  }\n\n  protected updatePosition(virtPos?: Partial<Coordinate>) {\n    if (virtPos && isNum(virtPos.x)) {\n      this.position.virtual.x = virtPos.x as number;\n    }\n\n    if (virtPos && isNum(virtPos.y)) {\n      this.position.virtual.y = virtPos.y as number;\n    }\n\n    this.emit(ScrollerEvent.VIRTUAL, this.position.virtual);\n    this.emit<Coordinate>(\n      ScrollerEvent.TRANSFORM_VIRTUAL,\n      this.position.virtual,\n      (newPos) => {\n        this.position.virtual.x = newPos.x;\n        this.position.virtual.y = newPos.y;\n      }\n    );\n\n    if (\n      this.isEventMuted(ScrollerEvent.TRANSFORM_OUTPUT) ||\n      ! this.hasEventListeners(ScrollerEvent.TRANSFORM_OUTPUT)\n    ) {\n      this.updateOutput(this.position.virtual);\n    } else {\n      this.emit<OutputTransformEvent>(\n        ScrollerEvent.TRANSFORM_OUTPUT,\n        {\n          pos: this.position.output,\n          step: (outPos) => this.updateOutput(outPos)\n        }\n      );\n    }\n  }\n\n  protected updateOutput(pos: Coordinate) {\n    this.position.output.x = pos.x;\n    this.position.output.y = pos.y;\n\n    this.emit(ScrollerEvent.OUTPUT, pos);\n  }\n\n  public lock(name = 'default', enable = true) {\n    if ( ! this.locks.includes(name) && enable) {\n      this.locks.push(name);\n    } else if ( ! enable) {\n      this.unlock(name);\n    }\n  }\n\n  public unlock(name = 'default') {\n    const index = this.locks.indexOf(name);\n\n    if (index > -1) {\n      this.locks.splice(index, 1);\n    }\n  }\n\n  public isLocked(name?: string) {\n    if (name) {\n      return this.locks.includes(name);\n    }\n\n    return this.locks.length > 0;\n  }\n\n  public scrollTo(\n    pos: Partial<Coordinate>,\n    skipOutputTransform = false\n  ) {\n    this.emit<ScrollToEvent>(\n      ScrollerEvent.SCROLL_TO,\n      { pos, skipOutputTransform }\n    );\n  }\n\n  public tweenTo(\n    pos: Partial<Coordinate>,\n    options: TweenToEvent['options'] = {}\n  ) {\n    this.emit<TweenToEvent>(\n      ScrollerEvent.TWEEN_TO,\n      { pos, options }\n    );\n  }\n\n  public onVirtual(cb: EventListenerCb<Coordinate>) {\n    return this.on(ScrollerEvent.VIRTUAL, cb);\n  }\n\n  public onScroll(cb: EventListenerCb<Coordinate>) {\n    return this.on(ScrollerEvent.OUTPUT, cb);\n  }\n\n  public onDelta(cb: EventListenerCb<Coordinate>) {\n    return this.on(ScrollerEvent.DELTA, cb);\n  }\n}\n","import { listenCompose, listenEl } from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\nimport { Browser } from '@smoovy/utils';\n\ninterface Config {\n  /**\n   * Ignore focused elements within the given elements\n   * Default: []\n   */\n  ignoreInside?: HTMLElement[];\n\n  /**\n   * The target to set the focus listener onto\n   * Default: window\n   */\n  focusTarget?: Window | Document | HTMLElement;\n\n  /**\n   * Use native mode. This will trigger the scroll events on\n   * a defined target instead of the scroller directly\n   */\n  nativeTarget?: Window | HTMLElement;\n}\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => (scroller) => {\n  const focusTarget = config.focusTarget || Browser.client ? window : undefined;\n  const container = scroller.dom.container.element;\n  const ignoreIn = config.ignoreInside || [];\n  const scrollListener = (event: Event) => {\n    event.preventDefault();\n\n    container.scrollLeft = container.scrollTop = 0;\n  };\n\n  const focusListener = (event: FocusEvent) => {\n    Ticker.requestAnimationFrame(() => {\n      const activeEl = event.target;\n\n      if ( ! (activeEl instanceof HTMLElement)) {\n        return;\n      }\n\n      const ignore = ignoreIn.map(el => el.contains(activeEl)).includes(true);\n\n      if (\n        ! ignore &&\n        activeEl &&\n        container.contains(activeEl)\n        || container === activeEl\n      ) {\n        const bounds = activeEl.getBoundingClientRect();\n        const targetSize = scroller.dom.container.size;\n\n        if (\n          bounds.top <= 0 || bounds.top >= targetSize.height ||\n          bounds.left <= 0 || bounds.right >= targetSize.width\n        ) {\n          if (config.nativeTarget) {\n            const position = scroller.position.virtual;\n\n            config.nativeTarget.scrollTo(\n              position.x + bounds.left - targetSize.width / 2,\n              position.y + bounds.top - targetSize.height / 2\n            );\n          } else {\n            scroller.emit(ScrollerEvent.DELTA, {\n              y: -bounds.top + targetSize.height / 2,\n              x: -bounds.left + targetSize.width / 2\n            });\n          }\n        }\n      }\n    });\n  };\n\n  return listenCompose(\n    listenEl(container, 'scroll', scrollListener),\n    focusTarget\n      ? listenEl(focusTarget, 'focus', focusListener, true)\n      : undefined\n  );\n};\n\nexport { Config as BypassFocusConfig };\nexport default behavior;\n","import { Coordinate } from '@smoovy/utils';\n\nexport function getDeltaByKeyEvent(\n  event: KeyboardEvent,\n  arrowDelta = 100,\n  pageDelta = 250,\n  spaceDelta = 200,\n  homeEndDelta = Infinity\n) {\n  const delta: Coordinate = { x: 0, y: 0 };\n\n  switch (event.key) {\n    case ' ':\n      delta.y = -spaceDelta;\n      break;\n\n    case 'ArrowLeft':\n      delta.x = arrowDelta;\n      break;\n\n    case 'ArrowRight':\n      delta.x = -arrowDelta;\n      break;\n\n    case 'ArrowDown':\n      delta.y = -arrowDelta;\n      break;\n\n    case 'ArrowUp':\n      delta.y = arrowDelta;\n      break;\n\n    case 'PageDown':\n      delta.y = -pageDelta;\n      break;\n\n    case 'PageUp':\n      delta.y = pageDelta;\n      break;\n\n    case 'Home':\n      delta.y = homeEndDelta;\n      break;\n\n    case 'End':\n      delta.y = -homeEndDelta;\n      break;\n  }\n\n  return delta;\n}\n","import { listenCompose, listenEl, Unlisten } from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\nimport { Tween } from '@smoovy/tween';\nimport { isNum } from '@smoovy/utils';\n\nimport {\n  ScrollBehavior, ScrollerEvent, ScrollToEvent, TweenToEvent,\n} from '../core';\nimport { getDeltaByKeyEvent } from '../utils/keyboard';\n\ninterface Config {\n  /**\n   * The target to put all the events on\n   * Default: Window\n   */\n  target?: Window | HTMLElement;\n\n  /**\n   * The condition to dermine whether\n   * the native mode should be active or not\n   * Default: () => false\n   */\n  condition?: () => boolean;\n}\n\nconst defaultConfig = {\n  condition: () => false\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n  let self: ReturnType<ScrollBehavior>;\n\n  return self = (scroller) => {\n    const target = cfg.target || window;\n    const detachedBehaviors: string[] = [];\n    let unlisten: Unlisten | undefined;\n\n    const getPos = () => {\n      const x = target === window\n        ? target.scrollX\n        : (target as HTMLElement).scrollLeft;\n\n      const y = target === window\n        ? target.scrollY\n        : (target as HTMLElement).scrollTop;\n\n      return { x, y };\n    };\n\n    const check = () => {\n      if (cfg.condition()) {\n        scroller.behaviors.forEach((b, name) => {\n          if (b !== self) {\n            scroller.detachBehavior(name);\n            detachedBehaviors.push(name);\n          }\n        });\n\n        unlisten = listenCompose(\n          listenEl(target, 'scroll', () => {\n            const pos = getPos();\n\n            scroller.emit(ScrollerEvent.DELTA, {\n              x: scroller.position.virtual.x - pos.x,\n              y: scroller.position.virtual.y - pos.y\n            });\n          }),\n          scroller.on<ScrollToEvent>(ScrollerEvent.SCROLL_TO, ({ pos }) => {\n            if (isNum(pos.x) || isNum(pos.y)) {\n              const defPos = getPos();\n\n              target.scrollTo(\n                isNum(pos.x) ? pos.x as number : defPos.x,\n                isNum(pos.y) ? pos.y as number : defPos.y\n              );\n            }\n          })\n        );\n\n        scroller.on<TweenToEvent>(\n          ScrollerEvent.TWEEN_TO,\n          ({ pos, options }) => {\n            const force = !!options.force;\n            let tween: Tween | undefined;\n            const shallowStop = () => {\n              if (tween && ! force) {\n                tween.stop();\n                tween = undefined;\n              }\n            };\n\n            const unlistenTween = listenCompose(\n              listenEl(window, 'touchstart', shallowStop),\n              listenEl(window, 'wheel', shallowStop),\n              listenEl(window, 'keydown', (event) => {\n                const delta = getDeltaByKeyEvent(event);\n\n                if (event.key === 'Tab' || delta.x !== 0 || delta.y !== 0) {\n                  shallowStop();\n                }\n              })\n            );\n\n            tween = Tween.fromTo(scroller.position.virtual, pos, {\n              mutate: false,\n              duration: options.duration,\n              easing: options.easing,\n              on: {\n                update: (newPos) => window.scrollTo(newPos.x, newPos.y),\n                complete: unlistenTween,\n                stop: unlistenTween\n              }\n            });\n          }\n        );\n      } else if (detachedBehaviors.length > 0) {\n        if (unlisten) {\n          unlisten();\n          unlisten = undefined;\n        }\n\n        detachedBehaviors.forEach(name => scroller.attachBehavior(name));\n        Ticker.requestAnimationFrame(() => scroller.dom.recalc());\n      }\n    };\n\n    setTimeout(() => check());\n    scroller.on(ScrollerEvent.RECALC, () => check());\n  };\n};\n\nexport { Config as BypassNativeConfig };\nexport default behavior;\n","import { clamp, Coordinate } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\n\nconst behavior: ScrollBehavior = () => (scroller) => {\n  return scroller.on<Coordinate>(\n    ScrollerEvent.TRANSFORM_VIRTUAL,\n    (virtual) => {\n      const wSize = scroller.dom.wrapper.size;\n      const cSize = scroller.dom.container.size;\n      const maxScrollX = Math.max(wSize.width - cSize.width, 0);\n      const maxScrollY = Math.max(wSize.height - cSize.height, 0);\n\n      return {\n        x: clamp(virtual.x, 0, maxScrollX),\n        y: clamp(virtual.y, 0, maxScrollY)\n      };\n    }\n  );\n};\n\nexport default behavior;\n","import { listenEl } from '@smoovy/event';\nimport { Browser } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\nimport { getDeltaByKeyEvent } from '../utils/keyboard';\n\ninterface Config {\n  /**\n   * A target element on which the event listeners will be placed\n   * Default: `document.documentElement`\n   */\n  target?: HTMLElement;\n\n  /**\n   * Whether passive events are enabled or not.\n   * Default: false\n   */\n  passive?: boolean;\n\n  /**\n   * The keyboard event on which to trigger the emission\n   * Default: keydown\n   */\n  eventName?: keyof HTMLElementEventMap;\n\n  /**\n   * The delta value for the arrow keys\n   * Default: 100\n   */\n  arrowDelta?: number;\n\n  /**\n   * The page up & down delta value\n   * Default: 250\n   */\n  pageDelta?: number;\n\n  /**\n   * The delta value for the space key\n   * Default: 150\n   */\n  spaceDelta?: number;\n\n  /**\n   * The delta value for home and end\n   * Default: Infinity\n   */\n  homeEndDelta?: number;\n}\n\nconst defaultConfig = {\n  passive: false,\n  target: Browser.client ? document.documentElement : undefined,\n  eventName: 'keydown',\n  arrowDelta: 100,\n  pageDelta: 250,\n  spaceDelta: 200,\n  homeEndDelta: Infinity\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    const target = cfg.target as HTMLElement;\n    const listener = (event: KeyboardEvent) => {\n      const delta = getDeltaByKeyEvent(\n        event,\n        cfg.arrowDelta,\n        cfg.pageDelta,\n        cfg.spaceDelta,\n        cfg.homeEndDelta\n      );\n\n      if (delta.x || delta.y) {\n        scroller.emit(ScrollerEvent.DELTA, delta);\n      }\n    };\n\n    return Browser.wheelEvent\n      ? listenEl(\n          target,\n          cfg.eventName,\n          listener as any,\n          { passive: config.passive }\n        )\n      : undefined;\n  };\n};\n\nexport { Config as KeyboardConfig };\nexport default behavior;\n","import { Ticker, TickerThread } from '@smoovy/ticker';\nimport { Browser, cutDec, lerp } from '@smoovy/utils';\n\nimport { OutputTransformEvent, ScrollBehavior, ScrollerEvent } from '../core';\n\ninterface Config {\n  /**\n   * The damping used for the linear interpolation\n   * The lower this value the smoother the animation\n   * Default: 0.1\n   */\n  damping?: number;\n\n  /**\n   * The damping for mobile (touch) devices\n   * Default: 0.18\n   */\n  mobileDamping?: number;\n\n  /**\n   * The value on which to decide when to stop the lerp calculations\n   * Default: 0.009\n   */\n  precision?: number;\n\n  /**\n   * A custom ticker to use for the animation\n   */\n  ticker?: Ticker;\n}\n\nconst defaultConfig = {\n  damping: 0.1,\n  precision: 0.009,\n  mobileDamping: 0.18,\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    let thread: TickerThread;\n    const ticker = cfg.ticker || new Ticker();\n    const damping = Browser.mobile ? cfg.mobileDamping : cfg.damping;\n    const unlisten = scroller.on<OutputTransformEvent>(\n      ScrollerEvent.TRANSFORM_OUTPUT,\n      ({ pos, step }) => {\n        if (thread) {\n          thread.kill();\n        }\n\n        thread = ticker.add((_delta, _time, kill) => {\n          const virtual = scroller.position.virtual;\n          const outputX = lerp(pos.x, virtual.x, damping);\n          const outputY = lerp(pos.y, virtual.y, damping);\n          const diffX = Math.abs(virtual.x - outputX);\n          const diffY = Math.abs(virtual.y - outputY);\n\n          if (diffX < cfg.precision && diffY < cfg.precision) {\n            kill();\n          }\n\n          step({ x: outputX, y: outputY });\n        });\n      }\n    );\n\n    return () => {\n      unlisten();\n      ticker.kill();\n    };\n  };\n};\n\nexport { Config as LerpContentConfig };\nexport default behavior;\n","import { listenEl } from '@smoovy/event';\nimport { Browser } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\n\ninterface Config {\n  /**\n   * A target element on which the event listeners will be placed\n   * Default: `document.documentElement`\n   */\n  target?: HTMLElement;\n\n  /**\n   * Whether passive events are enabled or not.\n   * Default: false\n   */\n  passive?: boolean;\n\n  /**\n   * The multiplier used on the delta value.\n   * Default: 1\n   */\n  multiplier?: number;\n\n  /**\n   * The multiplier used on the delta value for firefox browsers\n   * Default: 25\n   */\n  multiplierFirefox?: number;\n}\n\nconst defaultConfig = {\n  passive: false,\n  multiplier: 1,\n  multiplierFirefox: 25\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    const target = cfg.target || document.documentElement;\n    const listener = (event: WheelEvent) => {\n      const delta = { x: 0, y: 0 };\n\n      if ( ! config.passive) {\n        event.preventDefault();\n      }\n\n      delta.x = (event as any).wheelDeltaX || event.deltaX * -1;\n      delta.y = (event as any).wheelDeltaY || event.deltaY * -1;\n      delta.x *= cfg.multiplier;\n      delta.y *= cfg.multiplier;\n\n\n      if (Browser.firefox && event.deltaMode === 1) {\n        delta.x *= cfg.multiplierFirefox;\n        delta.y *= cfg.multiplierFirefox;\n      }\n\n      scroller.emit(ScrollerEvent.DELTA, delta);\n    };\n\n    return Browser.wheelEvent\n      ? listenEl(target, 'wheel', listener, { passive: cfg.passive })\n      : undefined;\n  };\n};\n\nexport { Config as MouseWheelConfig };\nexport default behavior;\n","import { Unlisten } from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\nimport { Coordinate } from '@smoovy/utils';\n\nimport {\n  ScrollBehavior as SmoovyScrollBehavior, ScrollerEvent, ScrollToEvent,\n} from '../core';\n\ninterface Config {\n  /**\n   * Use native mode. This will trigger the scroll events on\n   * a defined target instead of the scroller directly\n   */\n  nativeTarget?: Window | HTMLElement;\n\n  /**\n   * The scroll behavior to use for the native target\n   * Default: smooth\n   */\n  nativeBehavior?: ScrollBehavior;\n}\n\nconst behavior: SmoovyScrollBehavior<Config> = (config = {}) => (scroller) => {\n  return scroller.on<ScrollToEvent>(ScrollerEvent.SCROLL_TO, (event) => {\n    let unmute: Unlisten;\n\n    if (event.skipOutputTransform) {\n      unmute = scroller.muteEvents(ScrollerEvent.TRANSFORM_OUTPUT);\n    }\n\n    const virtual = scroller.position.virtual;\n\n    if (config.nativeTarget) {\n      const position: ScrollToOptions = {};\n\n      if (typeof event.pos.x === 'number') {\n        position.left = event.pos.x;\n      }\n\n      if (typeof event.pos.y === 'number') {\n        position.top = event.pos.y;\n      }\n\n      config.nativeTarget.scrollTo({\n        behavior: config.nativeBehavior || 'smooth',\n        ...position\n      });\n    } else {\n      const delta: Partial<Coordinate> = {};\n\n      if (typeof event.pos.x === 'number') {\n        delta.x = -(event.pos.x - virtual.x);\n      }\n\n      if (typeof event.pos.y === 'number') {\n        delta.y = -(event.pos.y - virtual.y);\n      }\n\n      scroller.updateDelta(delta);\n    }\n\n    Ticker.requestAnimationFrame(() => {\n      if (unmute) {\n        unmute();\n      }\n    });\n  });\n};\n\nexport { Config as ScrollToConfig };\nexport default behavior;\n","import { ScrollBehavior } from '../core';\nimport { objectDeepMerge } from '@smoovy/utils';\n\ninterface Config {\n  /**\n   * The default styling of the container element\n   * Default: {\n   *   width: '100%',\n   *   height: '100%',\n   *   overflow: 'hidden'\n   * }\n   */\n  defaults?: Partial<{ [key: string]: string }>;\n}\n\nconst defaultConfig = {\n  defaults: {\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden'\n  }\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = objectDeepMerge(defaultConfig as Config, config);\n\n  return (scroller) => {\n    const target = scroller.dom.container.element;\n\n    for (const x in cfg.defaults) {\n      if (cfg.defaults.hasOwnProperty(x)) {\n        (target.style as any)[x] = cfg.defaults[x];\n      }\n    }\n\n    return () => {\n      for (const x in cfg.defaults) {\n        if (cfg.defaults.hasOwnProperty(x)) {\n          (target.style as any)[x] = '';\n        }\n      }\n    };\n  };\n};\n\nexport { Config as StyleContainerConfig };\nexport default behavior;\n","import { ScrollBehavior, ScrollerEvent } from '../core';\nimport { listenCompose, listenEl } from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\nimport { lerp, between } from '@smoovy/utils';\n\ninterface Config {\n  /**\n   * A target element on which the event listeners will be placed\n   * Default: `document.documentElement`\n   */\n  target?: HTMLElement;\n\n  /**\n   * Whether passive events are enabled or not.\n   * Default: false\n   */\n  passive?: boolean;\n\n  /**\n   * The multiplier used on the delta value\n   * Default: 1\n   */\n  deltaMultiplier?: number;\n\n  /**\n   * The multiplier used on the velocity values.\n   * Default: 20\n   */\n  velocityMultiplier?: number;\n\n  /**\n   * The inertia (damping) applied to the velocity\n   * Default: 0.08\n   */\n  velocityDamping?: number;\n\n  /**\n   * The minimum threshold range to enter before\n   * canceling the velocity to 0 and stopping\n   * the momentum animation\n   * Default: 2\n   */\n  minimumThreshold?: number;\n}\n\nconst defaultConfig = {\n  passive: false,\n  deltaMultiplier: 1,\n  velocityDamping: 0.08,\n  velocityMultiplier: 20,\n  minimumThreshold: 2\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    const doc = document.documentElement;\n    const target = cfg.target || doc;\n    const ticker = new Ticker();\n    const startPos = { x: 0, y: 0 };\n    const velocity = { x: 0, y: 0 };\n    const threshold = cfg.minimumThreshold;\n    let lastMove = 0;\n    let down = false;\n\n    const getTouch = (event: TouchEvent) => {\n      return (event.targetTouches ? event.targetTouches[0] : event) as Touch;\n    };\n\n    const handleTouchStart = (event: TouchEvent) => {\n      ticker.kill();\n\n      const touch = getTouch(event);\n\n      startPos.x = touch.pageX;\n      startPos.y = touch.pageY;\n\n      down = true;\n    };\n\n    const handleTouchEnd = () => {\n      if (down) {\n        if (velocity.x !== 0 || velocity.y !== 0) {\n          ticker.add((_delta, _time, kill) => {\n            velocity.x = lerp(velocity.x, 0, cfg.velocityDamping);\n            velocity.y = lerp(velocity.y, 0, cfg.velocityDamping);\n\n            scroller.emit(ScrollerEvent.DELTA, velocity);\n\n            if (\n              between(velocity.x, threshold, -threshold) &&\n              between(velocity.y, threshold, -threshold)\n            ) {\n              velocity.x = 0;\n              velocity.y = 0;\n\n              kill();\n            }\n          });\n        }\n      }\n\n      down = false;\n    };\n\n    const handleTouchMove = (event: TouchEvent) => {\n      if (down) {\n        event.preventDefault();\n\n        const delta = { x: 0, y: 0 };\n        const touch = getTouch(event);\n\n        delta.x = (touch.pageX - startPos.x) * cfg.deltaMultiplier;\n        delta.y = (touch.pageY - startPos.y) * cfg.deltaMultiplier;\n\n        const deltaTime = Ticker.now() - lastMove;\n\n        velocity.x = (startPos.x - touch.pageX) / deltaTime;\n        velocity.y = (startPos.y - touch.pageY) / deltaTime;\n        velocity.x *= -1 * cfg.velocityMultiplier;\n        velocity.y *= -1 * cfg.velocityMultiplier;\n\n        startPos.x = touch.pageX;\n        startPos.y = touch.pageY;\n        lastMove = Ticker.now();\n\n        scroller.emit(ScrollerEvent.DELTA, delta);\n      }\n    };\n\n    return listenCompose(\n      listenEl(\n        target,\n        'touchstart',\n        handleTouchStart,\n        { passive: cfg.passive }\n      ),\n      listenEl(doc, 'touchend', handleTouchEnd, { passive: cfg.passive }),\n      listenEl(doc, 'touchmove', handleTouchMove, { passive: cfg.passive }),\n    );\n  };\n};\n\nexport { Config as TouchInertiaConfig };\nexport default behavior;\n","import { Browser, Coordinate, cutDec } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\n\ninterface Config {\n  /**\n   * Since firefox has a problem with tweening transforms,\n   * this will add a little trick to prevent firefox from\n   * executing flickering animations by adding a 3d rotation\n   * of 0.01deg to the transform property.\n   * Default: true\n   */\n  firefoxFix?: boolean;\n\n  /**\n   * Whether the styles should be set initially\n   * Default: true\n   */\n  initialStyles?: boolean;\n\n  /**\n   * The decimal places to keep\n   * Default: 2\n   */\n  precision?: number;\n}\n\nconst defaultConfig = {\n  firefoxFix: true,\n  initialStyles: true,\n  precision: 2\n};\n\nconst updateTransform = (\n  element: HTMLElement,\n  posX = 0,\n  posY = 0,\n  rotate = false\n) => {\n  let transform = `translate3d(${-posX}px, ${-posY}px, 0)`;\n\n  if (rotate) {\n    transform += ` rotate3d(0.01, 0.01, 0.01, 0.01deg)`;\n  }\n\n  element.style.transform = transform;\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n  const firefoxFix = cfg.firefoxFix && Browser.firefox;\n\n  return (scroller) => {\n    const element = scroller.dom.wrapper.element;\n    const unlisten = scroller.on<Coordinate>(\n      ScrollerEvent.OUTPUT,\n      (pos) => {\n        const posX = cutDec(pos.x, cfg.precision);\n        const posY = cutDec(pos.y, cfg.precision);\n\n        updateTransform(element, posX, posY, firefoxFix);\n      }\n    );\n\n    if (cfg.initialStyles) {\n      updateTransform(element, 0, 0, firefoxFix);\n    }\n\n    return () => {\n      element.style.transform = '';\n      unlisten();\n    };\n  };\n};\n\nexport { Config as TranslateConfig };\nexport default behavior;\n","import { listenCompose, listenEl, Unlisten } from '@smoovy/event';\nimport { Tween } from '@smoovy/tween';\n\nimport { ScrollBehavior, ScrollerEvent, TweenToEvent } from '../core';\n\ninterface Config {\n  /**\n   * Use native mode. This will trigger the scroll events on\n   * a defined target instead of the scroller directly\n   */\n  nativeTarget?: Window | HTMLElement;\n\n  /**\n   * Events used to detect changes on the native targets.\n   * Default: [ 'wheel', 'touchmove' ]\n   */\n  nativeKillEvents?: (keyof HTMLElementEventMap)[];\n}\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => (scroller) => {\n  let currentTween: Tween | undefined;\n\n  return scroller.on<TweenToEvent>(\n    ScrollerEvent.TWEEN_TO,\n    ({ pos, options }) => {\n      const force = !!options.force;\n      const unlisten = listenCompose(\n        config.nativeTarget === undefined\n          ? listenCompose(\n              scroller.on(ScrollerEvent.DELTA, () => {\n                if (currentTween && ! force) {\n                  currentTween.stop();\n                }\n              }),\n              scroller.muteEvents(\n                ScrollerEvent.TRANSFORM_OUTPUT,\n                force && ScrollerEvent.DELTA\n              )\n            )\n          : listenEl(\n              config.nativeTarget,\n              config.nativeKillEvents || ['wheel', 'touchmove'],\n              () => {\n                if (currentTween && ! force) {\n                  currentTween.stop();\n                }\n              }\n            )\n      );\n\n      if (currentTween) {\n        currentTween.stop();\n      }\n\n      currentTween = Tween.fromTo(\n        scroller.position.virtual,\n        pos,\n        {\n          mutate: false,\n          duration: options.duration,\n          easing: options.easing,\n          on: {\n            update: (newPos) => {\n              if (config.nativeTarget) {\n                config.nativeTarget.scrollTo(newPos.x, newPos.y);\n              } else {\n                scroller.updateDelta({\n                  x: scroller.position.virtual.x - newPos.x,\n                  y: scroller.position.virtual.y - newPos.y\n                });\n              }\n            },\n            stop: () => {\n              unlisten();\n              currentTween = undefined;\n            },\n            complete: () => {\n              unlisten();\n              currentTween = undefined;\n            }\n          }\n        }\n      );\n    }\n  );\n};\n\nexport { Config as TweenToConfig };\nexport default behavior;\n","import { listenCompose, listenEl } from '@smoovy/event';\nimport { Browser } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\n\ninterface Config {\n  /**\n   * The target to set the scroll listeners on\n   * Default: window\n   */\n  target?: HTMLElement | Window;\n}\n\nconst defaultConfig = {\n  target: Browser.client ? window : undefined\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    const contentSpan = document.createElement('div');\n    const parentElement = scroller.dom.container.element.parentElement;\n    const updateSize = () => {\n      contentSpan.style.height = `${scroller.dom.wrapper.size.height}px`;\n    };\n\n    updateSize();\n\n    if (parentElement) {\n      parentElement.append(contentSpan);\n    }\n\n    return listenCompose(\n      () => contentSpan.remove(),\n      cfg.target\n        ? listenEl(cfg.target, 'scroll', () => (\n            scroller.emit(ScrollerEvent.DELTA, {\n              x: scroller.position.virtual.x - window.scrollX,\n              y: scroller.position.virtual.y - window.scrollY\n            }))\n          )\n        : undefined,\n      scroller.on(ScrollerEvent.RECALC, updateSize)\n    );\n  };\n};\n\nexport { Config as NativeScrollbarConfig };\nexport default behavior;\n","import { Browser } from '@smoovy/utils';\n\nimport * as coreBehaviors from './behaviors';\nimport { ScrollBehaviorItem, Scroller, ScrollerDomType } from './core';\n\nexport const smoothScroll = (\n  dom: ScrollerDomType,\n  config: {\n    lerp?: coreBehaviors.LerpContentConfig,\n    mouse?: coreBehaviors.MouseWheelConfig,\n    touch?: coreBehaviors.TouchInertiaConfig,\n    focus?: coreBehaviors.BypassFocusConfig,\n    styles?: coreBehaviors.StyleContainerConfig['defaults'],\n    keyboard?: coreBehaviors.KeyboardConfig,\n    translate?: coreBehaviors.TranslateConfig,\n    behaviors?: { [name: string]: ScrollBehaviorItem }\n  } = {},\n) => new Scroller(dom, {\n  clampContent: coreBehaviors.clampContent(),\n  tweenTo: coreBehaviors.tweenTo(),\n  scrollTo: coreBehaviors.scrollTo(),\n  bypassFocus: coreBehaviors.bypassFocus(config.focus),\n  styleContainer: coreBehaviors.styleContainer({ defaults: config.styles }),\n  touchInertia: coreBehaviors.touchInertia(config.touch),\n  lerpContent: coreBehaviors.lerpContent(config.lerp),\n  mouseWheel: coreBehaviors.mouseWheel(config.mouse),\n  translate: coreBehaviors.translate(config.translate),\n  keyboard: coreBehaviors.keyboard(config.keyboard),\n  ...(config.behaviors || {})\n});\n\nexport const nativeSmoothScroll = (\n  dom: ScrollerDomType,\n  config: {\n    lerp?: coreBehaviors.LerpContentConfig,\n    focus?: coreBehaviors.BypassFocusConfig,\n    styles?: coreBehaviors.StyleContainerConfig['defaults'],\n    scrollTo?: coreBehaviors.ScrollToConfig,\n    tweenTo?: coreBehaviors.TweenToConfig,\n    translate?: coreBehaviors.TranslateConfig,\n    native?: coreBehaviors.BypassNativeConfig,\n    scrollbar?: coreBehaviors.NativeScrollbarConfig,\n    behaviors?: { [name: string]: ScrollBehaviorItem }\n  } = {}\n) => new Scroller(dom, {\n  clampContent: coreBehaviors.clampContent(),\n  nativeScrollbar: coreBehaviors.nativeScrollbar(config.scrollbar),\n  lerpContent: coreBehaviors.lerpContent(config.lerp),\n  bypassNative: coreBehaviors.bypassNative({\n    condition: () => Browser.mobile,\n    ...config.native\n  }),\n  translate: coreBehaviors.translate(config.translate),\n  tweenTo: coreBehaviors.tweenTo({\n    nativeTarget: Browser.client ? window : undefined,\n    ...config.tweenTo\n  }),\n  scrollTo: coreBehaviors.scrollTo({\n    nativeTarget: Browser.client ? window : undefined,\n    ...config.scrollTo\n  }),\n  bypassFocus: coreBehaviors.bypassFocus({\n    nativeTarget: Browser.client ? window : undefined,\n    ...config.focus\n  }),\n  styleContainer: coreBehaviors.styleContainer({\n    defaults: {\n      position: 'fixed',\n      left: '0px',\n      top: '0px',\n      width: '100%',\n      height: '100%',\n      ...config.styles\n    }\n  }),\n  ...(config.behaviors || {})\n});\n","import {\r\n    nativeSmoothScroll\r\n} from '@smoovy/scroller';\r\n\r\nwindow.onload = () => {\r\n    console.log('Spirit ~ Siddharth S.')\r\n    const mainEl = document.querySelector('.scroll-wrapper');\r\n    const scroller = nativeSmoothScroll({\r\n        element: mainEl\r\n    });\r\n}","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}