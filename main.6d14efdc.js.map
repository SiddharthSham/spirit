{"version":3,"sources":["../../src/uid.ts","../../src/browser.ts","../../src/math.ts","../../src/throttle.ts","../../src/base.ts","../../src/object.ts","../../src/element.ts","../../src/range.ts","../../src/resolver.ts","../../src/fetch.ts","../../src/url.ts","../../src/utils.ts","../../src/emitter.ts","../../src/index.ts","../../src/element/element-observer.ts","../../src/element/element-state.ts","../../src/viewport-observer.ts","../../src/easing.ts","../../src/tween.ts","../../src/behaviors/bypassNative.ts","../../src/dom.ts","../../src/core.ts","../../src/behaviors/bypassFocus.ts","../../src/utils/keyboard.ts","../../src/behaviors/clampContent.ts","../../src/behaviors/keyboard.ts","../../src/behaviors/lerpContent.ts","../../src/behaviors/mouseWheel.ts","../../src/behaviors/scrollTo.ts","../../src/behaviors/styleContainer.ts","../../src/behaviors/touchInertia.ts","../../src/behaviors/translate.ts","../../src/behaviors/tweenTo.ts","../../src/behaviors/nativeScrollbar.ts","../../src/scroller.ts","main.js"],"names":["Uid","Browser","uA","navigator","userAgent","toLowerCase","pf","platform","safari","test","this","safariVersion","match","replace","firefox","indexOf","chrome","ie","ieMobile","webkit","operaMini","edge","ios","mac","windows","android","androidMobile","blackberry","mobile","mouseWheelEvent","document","wheelEvent","keydownEvent","touchDevice","window","mutationObserver","client","mapRange","value","inStart","inEnd","outMin","outMax","clamp","min","max","Math","lerp","s","e","m","between","num","a","b","roundDec","precision","Number","round","cutDec","str","toString","parseFloat","substring","throttle","cb","ms","ctx","applyTimeout","lastTime","args","now","performance","Date","clearTimeout","setTimeout","apply","isDef","val","isNum","isStr","isArr","Array","isArray","isObj","type","isFunc","objectDeepMerge","target","sources","length","source","shift","key","Object","assign","objectDeepClone","obj","copy","attr","hasOwnProperty","objectValueByPath","path","separator","keys","split","last","getElementOffset","element","x","y","offsetLeft","offsetTop","offsetParent","Range","[object Object]","start","end","Resolver","promise","Promise","resolve","reject","_resolve","_reject","_completed","Error","completed","next","prefix","goFetch","input","init","controller","AbortController","fetch","signal","parser","parseUrl","url","createElement","href","protocol","host","hostname","port","pathname","search","hash","serializeUrl","undefined","EventEmitter","eventsOrName","dataOrCallback","callback","listenerCb","name","isEventMuted","i","len","emitters","emit","listeners","call","events","k","lenK","eventData","push","off","index","splice","event","mutedEvents","includes","forEach","unmuteEvents","listenEl","listener","options","t","addEventListener","removeEventListener","listenCompose","Ticker","TickerThread","calllback","delta","time","kill","bind","dead","minMaxFps","setMinFPS","setMaxFPS","requestAnimationFrame","fps","minFPS","maxFPS","maxDeltaMs","intervalMs","minDeltaMs","deadThreads","threads","thread","update","buryThread","deltaMs","tick","ticking","override","animate","ElementObserver","ElementState","width","height","async","force","updateDimensions","destroyListeners","updateSize","updateOffset","hasChanged","emitChanges","changeListeners","size","offset","filter","item","_destroyed","destroyed","throttleTime","remove","removeListener","bounds","getBoundingClientRect","sum","changed","lastSum","scrollPosition","viewportSize","padding","prepos","above","below","left","right","inside","ViewportObserver","checkListeners","listening","_listening","attach","detach","attached","state","stateResolver","silent","_state","innerWidth","innerHeight","handleResize","cancelAnimationFrame","lastRafId","prevSum","getStateSum","resizeListener","elementObserverDefaultConfig","mutationThrottle","viewportThrottle","mutators","documentElement","characterData","childList","subtree","config","default","observe","reset","states","register","checkStates","onDestroy","deregister","lastRaf","viewportObserver","throttleMs","MutationObserver","updateRaf","domContentLoadedListener","disconnect","easingsMap","Sine","in","c","d","cos","PI","out","sin","Expo","pow","Circ","sqrt","Bounce","none","Tween","values","registry","ticker","stableTarget","createThread","fromTarget","toValues","easing","easings.Circ","duration","paused","_paused","complete","_complete","passed","_passed","handleTick","currentTarget","progress","percent","on","delay","add","_delta","runCallback","tween","get","stop","delete","changes","from","to","change","mutate","overwrite","overwriteTarget","set","firstTick","pause","createDelay","_time","processChanges","prop","targetTo","WeakMap","_easings","easingsFlatMap","ScrollerDomEvent","ScrollerEvent","ScrollerDom","dynamic","HTMLElement","observer","container","wrapper","RECALC","className","appendChild","rootElement","children","childNodes","append","removeChild","Scroller","dom","behaviors","Map","output","virtual","setBehavior","unlisten","updateDelta","DELTA","isLocked","availableBehaviors","_behavior","attachBehavior","attachedBehaviors","recalc","behavior","has","detachBehavior","virtPos","position","TRANSFORM_DELTA","newDelta","updatePosition","VIRTUAL","TRANSFORM_VIRTUAL","newPos","TRANSFORM_OUTPUT","hasEventListeners","updateOutput","pos","step","outPos","OUTPUT","enable","locks","unlock","skipOutputTransform","SCROLL_TO","TWEEN_TO","scroller","focusTarget","ignoreIn","ignoreInside","preventDefault","scrollLeft","scrollTop","activeEl","map","el","contains","targetSize","top","nativeTarget","scrollTo","getDeltaByKeyEvent","arrowDelta","pageDelta","spaceDelta","homeEndDelta","Infinity","defaultConfig","condition","cfg","self","detachedBehaviors","getPos","scrollX","scrollY","check","defPos","shallowStop","unlistenTween","fromTo","wSize","cSize","maxScrollX","maxScrollY","passive","eventName","damping","mobileDamping","outputX","outputY","diffX","abs","diffY","multiplier","multiplierFirefox","wheelDeltaX","deltaX","wheelDeltaY","deltaY","deltaMode","unmute","muteEvents","nativeBehavior","defaults","overflow","style","deltaMultiplier","velocityDamping","velocityMultiplier","minimumThreshold","doc","startPos","velocity","threshold","lastMove","down","getTouch","targetTouches","touch","pageX","pageY","deltaTime","firefoxFix","initialStyles","updateTransform","posX","posY","rotate","transform","currentTween","nativeKillEvents","contentSpan","parentElement","smoothScroll","clampContent","coreBehaviors.clampContent","tweenTo","coreBehaviors.tweenTo","coreBehaviors.scrollTo","bypassFocus","coreBehaviors.bypassFocus","focus","styleContainer","coreBehaviors.styleContainer","styles","touchInertia","coreBehaviors.touchInertia","lerpContent","coreBehaviors.lerpContent","mouseWheel","coreBehaviors.mouseWheel","mouse","translate","coreBehaviors.translate","keyboard","coreBehaviors.keyboard","nativeSmoothScroll","nativeScrollbar","coreBehaviors.nativeScrollbar","scrollbar","bypassNative","coreBehaviors.bypassNative","native","onload","console","log","mainEl","querySelector"],"mappings":"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","file":"main.6d14efdc.js","sourceRoot":"..","sourcesContent":["export class Uid {\n  private static next = 0;\n\n  public static reset() {\n    this.next = 0;\n  }\n\n  public static get(prefix = '') {\n    return prefix + (this.next++).toString(36);\n  }\n}\n","export class Browser {\n  public static get uA() {\n    return navigator.userAgent.toLowerCase();\n  }\n\n  public static get pf() {\n    return navigator.platform.toLowerCase();\n  }\n\n  public static get safari() {\n    return (/^((?!chrome|android).)*safari/).test(this.uA);\n  }\n\n  public static get safariVersion() {\n    return +(\n      this.uA.match(/version\\/[\\d\\.]+.*safari/) || ['-1']\n    )[0].replace(/^version\\//, '').replace(/ safari$/, '');\n  }\n\n  public static get firefox() {\n    return this.uA.indexOf('firefox') > -1;\n  }\n\n  public static get chrome() {\n    return (/chrome/).test(this.uA);\n  }\n\n  public static get ie() {\n    return (/msie|trident/).test(this.uA);\n  }\n\n  public static get ieMobile() {\n    return (/iemobile/).test(this.uA);\n  }\n\n  public static get webkit() {\n    return (/webkit/).test(this.uA);\n  }\n\n  public static get operaMini() {\n    return (/opera mini/).test(this.uA);\n  }\n\n  public static get edge() {\n    return (/edge\\/\\d./).test(this.uA);\n  }\n\n  public static get ios() {\n    return (/ip(hone|[ao]d)/).test(this.uA);\n  }\n\n  public static get mac() {\n    return this.pf.indexOf('mac') > -1;\n  }\n\n  public static get windows() {\n    return this.pf.indexOf('win') > -1;\n  }\n\n  public static get android() {\n    return (/android/).test(this.uA);\n  }\n\n  public static get androidMobile() {\n    return (/android.*mobile/).test(this.uA);\n  }\n\n  public static get blackberry() {\n    return (/blackberry/).test(this.uA);\n  }\n\n  public static get mobile() {\n    return this.ieMobile ||\n           this.blackberry ||\n           this.androidMobile ||\n           this.ios ||\n           this.operaMini;\n  }\n\n  /* istanbul ignore next */\n  public static get mouseWheelEvent() {\n    return 'onmousewheel' in document;\n  }\n\n  /* istanbul ignore next */\n  public static get wheelEvent() {\n    return 'onwheel' in document;\n  }\n\n  /* istanbul ignore next */\n  public static get keydownEvent() {\n    return 'onkeydown' in document;\n  }\n\n  /* istanbul ignore next */\n  public static get touchDevice() {\n    return 'ontouchstart' in window;\n  }\n\n  /* istanbul ignore next */\n  public static get mutationObserver() {\n    return 'MutationObserver' in window;\n  }\n\n  /* istanbul ignore next */\n  public static get client() {\n    return typeof window !== 'undefined' &&\n           typeof window.document !== 'undefined';\n  }\n}\n","export function mapRange(\n  value: number,\n  inStart: number,\n  inEnd: number,\n  outMin: number,\n  outMax: number,\n): number {\n  return outMin + (outMax - outMin) / (inEnd - inStart) * (value - inStart);\n}\n\nexport function clamp(\n  value: number,\n  min: number,\n  max: number,\n) {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function lerp(\n  s: number,\n  e: number,\n  m: number\n) {\n  return s * (1 - m) + e * m;\n}\n\nexport function between(num: number, a: number, b: number) {\n  return num > Math.min(a, b) && num < Math.max(a, b);\n}\n\nexport function roundDec(\n  value: number,\n  precision: number\n) {\n  return Number(\n    Math.round(value + ('e' as any) + precision) + 'e-' + precision\n  );\n}\n\nexport function cutDec(\n  value: number,\n  precision: number\n) {\n  const str = value.toString();\n\n  return parseFloat(str.substring(0, str.indexOf('.') + 1 + precision));\n}\n","export function throttle(\n  cb: Function,\n  ms: number = 0,\n  ctx?: any\n): (...args: any[]) => void {\n  let lastTime = 0;\n  let applyTimeout: any;\n\n  return (...args) => {\n    const now = (performance || /* istanbul ignore next */ Date).now();\n\n    if (lastTime && now < lastTime + ms) {\n      clearTimeout(applyTimeout);\n\n      applyTimeout = setTimeout(function () {\n        lastTime = now;\n        cb.apply(ctx, args);\n      }, ms);\n    } else {\n      lastTime = now;\n\n      cb.apply(ctx, args);\n    }\n  };\n}\n","type Value<T> = T | undefined | null | void;\n\nexport function isDef<T>(val: Value<T>): val is T {\n  return typeof val !== void 0 && val !== undefined;\n}\n\nexport function isNum<T>(val: Value<T>): val is T {\n  return typeof val === 'number';\n}\n\nexport function isStr<T>(val: Value<T>): val is T {\n  return typeof val === 'string';\n}\n\nexport function isArr<T>(val: Value<T>): val is T {\n  return Array.isArray(val);\n}\n\nexport function isObj<T>(val: Value<T>): val is T {\n  const type = typeof val;\n\n  return !isArr(val) && (\n    type === 'object' &&\n    val != null ||\n    type === 'function'\n  );\n}\n\nexport function isFunc<T>(val: Value<T>): val is T {\n  return typeof val === 'function';\n}\n\n","import { isObj } from './base';\n\ninterface DefaultObject {\n  [id: string]: any;\n}\n\nexport function objectDeepMerge<T extends DefaultObject>(\n  target: T,\n  ...sources: DefaultObject[]\n): T {\n  if ( ! sources.length) {\n    return target;\n  }\n\n  const source = sources.shift();\n\n  if (isObj(target) && isObj(source)) {\n    for (const key in source) {\n      if (isObj(source[key])) {\n        if ( ! target[key]) {\n          Object.assign(target, { [key]: {} });\n        }\n\n        objectDeepMerge(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return objectDeepMerge(target, ...sources);\n}\n\nexport function objectDeepClone<T extends DefaultObject>(obj: T): T {\n  if (isObj(obj)) {\n    const copy: { [attr: string]: any } = {};\n\n    for (const attr in obj) {\n      /* istanbul ignore else */\n      if (obj.hasOwnProperty(attr)) {\n        copy[attr] = objectDeepClone(obj[attr]);\n      }\n    }\n\n    return copy as T;\n  }\n\n  return obj;\n}\n\nexport function objectValueByPath<T extends DefaultObject>(\n  obj: T|undefined,\n  path: string,\n  separator: string = '.'\n): any {\n  const keys = path.split(separator);\n  let last = obj;\n\n  while (keys.length > 0) {\n    const key = keys.shift();\n\n    if (typeof last === 'object' && key) {\n      last = last[key];\n    } else {\n      last = undefined;\n      break;\n    }\n  }\n\n  return last;\n}\n","import { Coordinate } from './dimension';\n\nexport function getElementOffset(element: HTMLElement): Coordinate {\n  let x = 0;\n  let y = 0;\n\n  do {\n    x += element.offsetLeft || 0;\n    y += element.offsetTop || 0;\n    element = element.offsetParent as HTMLElement;\n  } while (element);\n\n  return { x, y };\n}\n","import { mapRange } from './math';\n\nexport class Range {\n  public start: number;\n  public end: number;\n\n  public constructor(\n    start: number,\n    end: number,\n  ) {\n    this.start = start > end ? end : start;\n    this.end = end > start ? end : start;\n  }\n\n  public mapTo(\n    val: number,\n    min: number = 0,\n    max: number = 1,\n  ) {\n    return mapRange(val, this.start, this.end, min, max);\n  }\n}\n","export class Resolver<T = void, E = T> {\n  public promise: Promise<T>;\n  private _resolve: (value: T) => void;\n  private _reject: (error: any) => void;\n  private _completed: boolean = false;\n\n  public constructor() {\n    this.promise = new Promise<T>((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  public resolve(value?: T) {\n    if (this._completed) {\n      throw new Error('Can\\'t resolve promise. Already completed');\n    }\n\n    this._completed = true;\n    this._resolve(value as T);\n\n    return this.promise;\n  }\n\n  public reject(value?: E) {\n    if (this._completed) {\n      throw new Error('Can\\'t reject promise. Already completed');\n    }\n\n    this._completed = true;\n    this._reject(value);\n\n    return this.promise;\n  }\n\n  public get completed() {\n    return this._completed;\n  }\n}\n","export type GoFetch = (\n  ReturnType<typeof fetch> & { controller: AbortController }\n);\n\nexport function goFetch(\n  input: RequestInfo,\n  init?: RequestInit\n) {\n  const controller = new AbortController();\n  const promise = fetch(\n    input,\n    Object.assign({ signal: controller.signal }, init)\n  ) as GoFetch;\n\n  promise.controller = controller;\n\n  return promise;\n}\n","import { Browser } from './browser';\n\nlet parser: HTMLAnchorElement;\n\nexport interface BrowserUrl {\n  protocol: string;\n  host: string;\n  hostname: string;\n  port: string;\n  pathname: string;\n  search: string;\n  hash: string;\n}\n\nexport function parseUrl(url: string): BrowserUrl {\n  if ( ! Browser.client) {\n    throw new Error('URL needs to be parse on the client side');\n  }\n\n  if ( ! parser) {\n    parser = document.createElement('a');\n  }\n\n  parser.href = url;\n\n  return {\n    protocol: parser.protocol,\n    host: parser.host,\n    hostname: parser.hostname,\n    port: parser.port,\n    pathname: parser.pathname,\n    search: parser.search,\n    hash: parser.hash\n  };\n}\n\nexport function serializeUrl(url: BrowserUrl) {\n  return `${url.protocol}//${url.host}${url.pathname}${url.search}${url.hash}`;\n}\n","export type Unlisten = () => void;\n\nexport function listenCompose<T extends Unlisten | undefined>(\n  ...listeners: T[]\n): Unlisten {\n  return () => listeners.forEach(cb => (\n    typeof cb === 'function' && cb.call(undefined)\n  ));\n}\n","import { Unlisten } from './utils';\n\nexport type EventListenerCb<T = any> = (data: T) => void;\nexport type ListenerCallback<T = any> = (...args: T[]) => void;\n\nexport class EventEmitter {\n  private listeners: { [name: string]: EventListenerCb[] } = {};\n  private emitters: EventEmitter[] = [];\n  private mutedEvents: string[] = [];\n\n  public emit<T = any, TC = T>(\n    eventsOrName: { [name: string]: T } | string,\n    dataOrCallback?: T | ListenerCallback<TC>,\n    callback: ListenerCallback<TC> = () => {}\n  ) {\n    const listenerCb = typeof dataOrCallback === 'function'\n      ? dataOrCallback as ListenerCallback<TC>\n      : callback;\n\n    if (typeof eventsOrName === 'string') {\n      const name = eventsOrName;\n\n      if ( ! this.isEventMuted(name)) {\n        for (let i = 0, len = this.emitters.length; i < len; i++) {\n          this.emitters[i].emit(eventsOrName, dataOrCallback, callback);\n        }\n\n        /* istanbul ignore else */\n        if (this.listeners.hasOwnProperty(name)) {\n          for (let i = 0, len = this.listeners[name].length; i < len; i++) {\n            listenerCb.call(\n              this,\n              this.listeners[name][i].call(\n                this,\n                dataOrCallback !== listenerCb\n                  ? dataOrCallback as T\n                  : undefined\n              ) as any\n            );\n          }\n        }\n      }\n    } else {\n      const events = eventsOrName;\n      const keys = Object.keys(events);\n\n      for (let k = 0, lenK = keys.length; k < lenK; k++) {\n        const name = keys[k];\n        const eventData = events[name];\n\n        /* istanbul ignore else */\n        if ( ! this.isEventMuted(name)) {\n          for (let i = 0, len = this.emitters.length; i < len; i++) {\n            this.emitters[i].emit(name, eventData, callback);\n          }\n\n          /* istanbul ignore else */\n          if (this.listeners.hasOwnProperty(name)) {\n            for (let i = 0, len = this.listeners[name].length; i < len; i++) {\n              listenerCb.call(\n                this,\n                this.listeners[name][i].call(this, eventData) as any\n              );\n            }\n          }\n        }\n      }\n    }\n\n    return this;\n  }\n\n  public on<T>(name: string, cb: EventListenerCb<T>): Unlisten {\n    if (this.listeners.hasOwnProperty(name)) {\n      this.listeners[name].push(cb);\n    } else {\n      this.listeners[name] = [ cb ];\n    }\n\n    return () => this.off(name, cb);\n  }\n\n  public off(name: string, cb: EventListenerCb) {\n    const listeners = this.listeners;\n\n    /* istanbul ignore else */\n    if (listeners.hasOwnProperty(name)) {\n      const index = listeners[name].indexOf(cb);\n\n      /* istanbul ignore else */\n      if (index > -1) {\n        listeners[name].splice(index, 1);\n      }\n    }\n  }\n\n  public hasEventListeners(name: string) {\n    return this.listeners[name] && this.listeners[name].length > 0;\n  }\n\n  public isEventMuted(event: string) {\n    return this.mutedEvents.includes(event);\n  }\n\n  public muteEvents(...events: (string|boolean)[]): Unlisten {\n    events.forEach(event => {\n      /* istanbul ignore else */\n      if (typeof event === 'string' && ! this.mutedEvents.includes(event)) {\n        this.mutedEvents.push(event);\n      }\n    });\n\n    return () => this.unmuteEvents(...events);\n  }\n\n  public unmuteEvents(...events: (string|boolean)[]) {\n    events.forEach(event => {\n      /* istanbul ignore else */\n      if (typeof event === 'string') {\n        const index = this.mutedEvents.indexOf(event);\n\n        /* istanbul ignore else */\n        if (index > -1) {\n          this.mutedEvents.splice(index, 1);\n        }\n      }\n    });\n  }\n\n  public reflectEvents(...emitters: EventEmitter[]) {\n    this.emitters = emitters;\n  }\n\n  public unreflectEvents() {\n    this.emitters = [];\n  }\n}\n","type TickerUpdateCallback = (\n  delta: number,\n  time: number,\n  kill: () => void\n) => void;\n\nexport class TickerThread {\n  public dead: boolean = false;\n\n  public constructor(\n    private calllback: TickerUpdateCallback\n  ) {}\n\n  public update(delta: number, time: number) {\n    this.calllback(delta, time, this.kill.bind(this));\n  }\n\n  public kill() {\n    this.dead = true;\n  }\n}\n\nexport class Ticker {\n  public readonly intervalMs = 60 / 1000;\n  public ticking = false;\n  public override = false;\n  private threads: TickerThread[] = [];\n  private lastTime = -1;\n  private minDeltaMs = 0;\n  private maxDeltaMs = 1000 / 10;\n\n  public constructor(minMaxFps?: number | [ number, number ]) {\n    if (minMaxFps instanceof Array && minMaxFps.length === 2) {\n      this.setMinFPS(minMaxFps[0]);\n      this.setMaxFPS(minMaxFps[1]);\n    }\n\n    if (typeof minMaxFps === 'number') {\n      this.setMaxFPS(minMaxFps);\n    }\n  }\n\n  public static requestAnimationFrame(callback: FrameRequestCallback) {\n    return window.requestAnimationFrame\n      ? window.requestAnimationFrame(callback)\n      : /* istanbul ignore next */ window.setTimeout(callback, 1000 / 60);\n  }\n\n  public static now(): number {\n    return (window.performance || /* istanbul ignore next */ Date).now();\n  }\n\n  public setMinFPS(fps: number) {\n    const minFPS = Math.max(Math.min(fps, this.maxFPS), 0);\n\n    return this.maxDeltaMs = 1 / Math.min(minFPS / 1000, this.intervalMs);\n  }\n\n  public get minFPS() {\n    return 1000 / this.maxDeltaMs;\n  }\n\n  public setMaxFPS(fps: number) {\n    if (fps === 0) {\n      return this.minDeltaMs = 0;\n    }\n\n    const maxFPS = Math.max(fps, this.minFPS);\n\n    return this.minDeltaMs = 1 / (maxFPS / 1000);\n  }\n\n  public get maxFPS() {\n    return this.minDeltaMs > 0\n      ? 1000 / this.minDeltaMs\n      : this.intervalMs * 1000;\n  }\n\n  public tick(delta: number, time: number = Ticker.now()) {\n    const deadThreads: Array<TickerThread> = [];\n\n    for (let i = 0, len = this.threads.length; i < len; i++) {\n      const thread = this.threads[i];\n\n      if (thread.dead) {\n        deadThreads.push(thread);\n      } else {\n        thread.update(delta, time);\n      }\n    }\n\n    for (let i = 0, len = deadThreads.length; i < len; i++) {\n      this.buryThread(deadThreads[i]);\n    }\n  }\n\n  public update(time = Ticker.now()) {\n    if (time > this.lastTime) {\n      let deltaMs = time - this.lastTime;\n\n      if (deltaMs > this.maxDeltaMs) {\n        deltaMs = this.maxDeltaMs;\n      }\n\n      if (this.minDeltaMs && deltaMs + 1 < this.minDeltaMs) {\n        return;\n      }\n\n      this.tick(deltaMs * this.intervalMs, time);\n    }\n\n    this.lastTime = time;\n  }\n\n  public animate() {\n    Ticker.requestAnimationFrame((time) => {\n      this.update(time);\n\n      if (this.ticking && ! this.override && this.threads.length > 0) {\n        this.animate();\n      } else {\n        this.ticking = false;\n      }\n    });\n  }\n\n  public kill() {\n    this.threads.forEach((thread) => thread.kill());\n  }\n\n  private buryThread(thread: TickerThread) {\n    this.threads.splice(this.threads.indexOf(thread), 1);\n  }\n\n  public add(callback: TickerUpdateCallback): TickerThread {\n    const thread = new TickerThread(callback);\n\n    this.threads.push(thread);\n\n    if ( ! this.ticking && ! this.override) {\n      this.lastTime = Ticker.now();\n      this.ticking = true;\n\n      this.animate();\n    }\n\n    return thread;\n  }\n}\n","import { Browser, throttle } from '@smoovy/utils';\n\nimport { ViewportObservable, ViewportObserver } from '../viewport-observer';\nimport { ElementState } from './element-state';\n\nexport interface ElementObserverMutator {\n  target?: HTMLElement;\n  options?: MutationObserverInit;\n}\n\nexport interface ElementObserverConfig {\n  mutationThrottle?: number;\n  viewportThrottle?: number;\n  mutators?: ElementObserverMutator[];\n}\n\n/* istanbul ignore next */\nexport const elementObserverDefaultConfig: ElementObserverConfig = {\n  mutationThrottle: 100,\n  viewportThrottle: 100,\n  mutators: [\n    {\n      target: Browser.client ? document.documentElement : undefined,\n      options: {\n        characterData: true,\n        childList: true,\n        subtree: true\n      }\n    }\n  ]\n};\n\nexport class ElementObserver {\n  public static default = new ElementObserver(elementObserverDefaultConfig);\n  private lastRaf: number;\n  private attached = false;\n  private viewportObserver?: ViewportObservable;\n  private mutationObserver?: MutationObserver;\n  private states: ElementState[] = [];\n\n  public constructor(\n    private config: ElementObserverConfig = {}\n  ) {}\n\n  public static observe(element: HTMLElement | ElementState) {\n    return this.default.observe(element);\n  }\n\n  public static reset() {\n    return this.default.reset();\n  }\n\n  public observe(element: HTMLElement | ElementState) {\n    for (let i = 0, len = this.states.length; i < len; i++) {\n      /* istanbul ignore else */\n      if (this.states[i] === element || this.states[i].element === element) {\n        return this.states[i];\n      }\n    }\n\n    return this.register(\n      element instanceof ElementState ? element : new ElementState(element)\n    );\n  }\n\n  private register(state: ElementState) {\n    this.states.push(state);\n    this.checkStates();\n\n    state.update(true);\n    state.onDestroy(() => this.deregister(state));\n\n    return state;\n  }\n\n  private deregister(state: ElementState) {\n    const index = this.states.indexOf(state);\n\n    /* istanbul ignore else */\n    if (index > -1) {\n      this.states.splice(index, 1);\n      this.checkStates();\n    }\n  }\n\n  public reset() {\n    this.states.forEach(state => this.deregister(state));\n  }\n\n  public updateRaf() {\n    /* istanbul ignore else */\n    if (Browser.client) {\n      cancelAnimationFrame(this.lastRaf);\n\n      this.lastRaf = requestAnimationFrame(() => this.update());\n    } else {\n      this.update();\n    }\n  }\n\n  public update(async = false) {\n    for (let i = 0, len = this.states.length; i < len; i++) {\n      this.states[i].update(async);\n    }\n  }\n\n  private attach() {\n    this.attached = true;\n    this.viewportObserver = ViewportObserver.changed(\n      /* istanbul ignore next */\n      typeof this.config.viewportThrottle === 'number'\n        ? throttle(() => this.update(), this.config.viewportThrottle)\n        : () => this.update()\n    );\n\n    /* istanbul ignore next */\n    if (Browser.client && Browser.mutationObserver && this.config.mutators) {\n      const throttleMs = this.config.mutationThrottle;\n\n      this.mutationObserver = new MutationObserver(\n        typeof throttleMs === 'number'\n          ? throttle(() => this.updateRaf(), throttleMs)\n          : () => this.updateRaf()\n      );\n\n      this.config.mutators.forEach(config => {\n        if (config.target && this.mutationObserver) {\n          this.mutationObserver.observe(config.target, { ...config.options  });\n        }\n      });\n    }\n\n    let domContentLoadedListener: EventListenerOrEventListenerObject;\n\n    /* istanbul ignore next */\n    if (Browser.client) {\n      document.addEventListener(\n        'DOMContentLoaded',\n        domContentLoadedListener = () => {\n          this.updateRaf();\n\n          document.removeEventListener(\n            'DOMContentLoaded',\n            domContentLoadedListener\n          );\n        },\n        false\n      );\n    }\n\n    this.updateRaf();\n  }\n\n  private detach() {\n    this.attached = false;\n\n    /* istanbul ignore next */\n    if (this.viewportObserver) {\n      this.viewportObserver.remove();\n      this.viewportObserver = undefined;\n    }\n\n    /* istanbul ignore next */\n    if (this.mutationObserver) {\n      this.mutationObserver.disconnect();\n      this.mutationObserver = undefined;\n    }\n  }\n\n  private checkStates() {\n    if (this.states.length > 0 && ! this.attached) {\n      this.attach();\n    }\n\n    if (this.states.length === 0 && this.attached) {\n      this.detach();\n    }\n  }\n}\n","import {\n  Browser, Coordinate, getElementOffset, Size, throttle,\n} from '@smoovy/utils';\n\nexport type StateChangeListener = (size: Size, offset: Coordinate) => void;\nexport type StateDestroyListener = () => void;\nexport interface StateChangeListenerRef {\n  remove: () => void;\n}\n\nexport class ElementState<T extends HTMLElement = HTMLElement> {\n  public size: Size = { width: 0, height: 0 };\n  public offset: Coordinate = { x: 0, y: 0 };\n  public element: T;\n  private _destroyed = false;\n  private changeListeners: StateChangeListener[] = [];\n  private destroyListeners: StateDestroyListener[] = [];\n  private lastSum = 0;\n\n  public constructor(element: T | ElementState) {\n    if (element instanceof ElementState) {\n      this.element = element.element as T;\n    } else {\n      this.element = element;\n    }\n  }\n\n  public update(\n    async = false,\n    force = false\n  ) {\n    if (async) {\n      setTimeout(() => this.updateDimensions(force));\n    } else {\n      this.updateDimensions(force);\n    }\n  }\n\n  public onDestroy(listener: StateDestroyListener) {\n    this.destroyListeners.push(listener);\n  }\n\n  private updateDimensions(force?: boolean) {\n    this.updateSize();\n    this.updateOffset();\n\n    if (this.hasChanged() || force) {\n      this.emitChanges();\n    }\n  }\n\n  private emitChanges() {\n    for (let i = 0, len = this.changeListeners.length; i < len; i++) {\n      this.changeListeners[i].call(this, this.size, this.offset);\n    }\n  }\n\n  private removeListener(listener: StateChangeListener) {\n    this.changeListeners = this.changeListeners.filter(item => {\n      return item !== listener;\n    });\n  }\n\n  public destroy() {\n    this._destroyed = true;\n\n    for (let i = 0, len = this.destroyListeners.length; i < len; i++) {\n      this.destroyListeners[i].call(this);\n    }\n\n    this.changeListeners = [];\n    this.destroyListeners = [];\n  }\n\n  public get destroyed() {\n    return this._destroyed;\n  }\n\n  public changed(\n    listener: StateChangeListener,\n    throttleTime: number = 0\n  ) {\n    if (throttleTime > 0) {\n      listener = throttle(listener, throttleTime);\n    }\n\n    this.changeListeners.push(listener);\n\n    const ref: StateChangeListenerRef = {\n      remove: () => this.removeListener(listener)\n    };\n\n    return ref;\n  }\n\n  public updateSize() {\n    /* istanbul ignore else */\n    if (Browser.client) {\n      const bounds = this.element.getBoundingClientRect();\n\n      this.size.width = bounds.width;\n      this.size.height = bounds.height;\n    } else {\n      this.size.width = 0;\n      this.size.height = 0;\n    }\n  }\n\n  public updateOffset() {\n    /* istanbul ignore else */\n    if (Browser.client) {\n      const offset = getElementOffset(this.element);\n\n      this.offset.x = offset.x;\n      this.offset.y = offset.y;\n    } else {\n      this.offset.x = 0;\n      this.offset.y = 0;\n    }\n  }\n\n  public hasChanged() {\n    const sum = (\n      this.offset.x + this.offset.y +\n      this.size.width + this.size.height\n    );\n\n    const changed = sum !== this.lastSum;\n\n    this.lastSum = sum;\n\n    return changed;\n  }\n\n  public inViewport(\n    scrollPosition: Coordinate,\n    viewportSize: Size,\n    padding: Coordinate = { x: 0, y: 0 }\n  ) {\n    const offset = {  ...this.offset };\n    const prepos = {\n      above: offset.y + padding.y + this.size.height < scrollPosition.y,\n      below: offset.y - padding.y > scrollPosition.y + viewportSize.height,\n      left: offset.x + padding.x + this.size.width < scrollPosition.x,\n      right: offset.x - padding.x > scrollPosition.x + viewportSize.width,\n    };\n\n    return {\n      ...prepos,\n      inside: !prepos.above && !prepos.below && !prepos.right && !prepos.left\n    };\n  }\n}\n","import { throttle, Resolver, Browser } from '@smoovy/utils';\n\nexport type ViewportChangeListener = (state: ViewportState) => void;\n\nexport interface ViewportState {\n  width: number;\n  height: number;\n}\n\nexport interface ViewportObservable {\n  remove: () => void;\n}\n\nexport class ViewportObserver {\n  private static _listening = false;\n  private static _state: ViewportState = { width: 0, height: 0 };\n  private static lastRafId: number = -1;\n  private static resizeListener?: EventListenerOrEventListenerObject;\n  private static listeners: ViewportChangeListener[] = [];\n  private static stateResolver = new Resolver<ViewportState>();\n\n  public static changed(\n    listener: ViewportChangeListener,\n    throttleTime: number = 0\n  ): ViewportObservable {\n    if (throttleTime > 0) {\n      listener = throttle(listener, throttleTime);\n    }\n\n    this.listeners.push(listener);\n    this.checkListeners();\n\n    return {\n      remove: () => this.removeListener(listener),\n    };\n  }\n\n  private static removeListener(listener: ViewportChangeListener) {\n    const index = this.listeners.indexOf(listener);\n\n    /* istanbul ignore else */\n    if (index > -1) {\n      this.listeners.splice(index, 1);\n      this.checkListeners();\n    }\n  }\n\n  private static checkListeners() {\n    this.listening = this.listeners.length > 0;\n  }\n\n  private static set listening(listening: boolean) {\n    /* istanbul ignore else */\n    if (listening && ! this._listening) {\n      this.attach();\n    } else if ( ! listening && this._listening) {\n      this.detach();\n    }\n\n    this._listening = listening;\n  }\n\n  public static get attached() {\n    return this._listening;\n  }\n\n  public static get state() {\n    return this.stateResolver.promise;\n  }\n\n  public static update(\n    force = false,\n    silent = false\n  ) {\n    /* istanbul ignore else */\n    if (Browser.client) {\n      this._state.width = window.innerWidth;\n      this._state.height = window.innerHeight;\n    }\n\n    if ( ! this.stateResolver.completed) {\n      this.stateResolver.resolve(this._state);\n    }\n\n    if ( ! silent) {\n      this.handleResize(force);\n    }\n  }\n\n  private static getStateSum() {\n    return this._state.width + this._state.height;\n  }\n\n  private static handleResize(force = false)  {\n    cancelAnimationFrame(this.lastRafId);\n\n    const prevSum = this.getStateSum();\n\n    this.lastRafId = requestAnimationFrame(() => {\n      this.update();\n\n      if (prevSum !== this.getStateSum() || true === force) {\n        for (let i = 0, len = this.listeners.length; i < len; i++) {\n          this.listeners[i].call(this, this._state);\n        }\n      }\n    });\n  }\n\n  private static attach() {\n    /* istanbul ignore else */\n    if ( ! this.resizeListener) {\n      this.handleResize();\n\n      /* istanbul ignore next */\n      this.resizeListener = () => this.handleResize();\n\n      /* istanbul ignore else */\n      if (Browser.client) {\n        window.addEventListener('resize', this.resizeListener, true);\n      }\n    }\n  }\n\n  private static detach() {\n    /* istanbul ignore else */\n    if (this.resizeListener) {\n      /* istanbul ignore else */\n      if (Browser.client) {\n        window.removeEventListener('resize', this.resizeListener, true);\n      }\n\n      this.resizeListener = undefined;\n    }\n  }\n}\n","export type EasingImplementation =\n  ((t: number, b: number, c: number, d: number) => number) |\n  ((t: number, b: number, c: number, d: number, s?: number) => number);\n\n/* istanbul ignore next */\nexport const Linear = {\n  none: (t: number, b: number, c: number, d: number): number => {\n    return c * t / d + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Quad = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return -c * (t /= d) * (t - 2) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Cubic = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Quart = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t * t * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Quint = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Sine = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Expo = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return (t === 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return (t === d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Circ = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Back = {\n  in: (\n    t: number,\n    b: number,\n    c: number,\n    d: number,\n    s: number = 1.70158\n  ): number => {\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  out: (\n    t: number,\n    b: number,\n    c: number,\n    d: number,\n    s: number = 1.70158\n  ): number => {\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Bounce = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c - Bounce.out(d - t, 0, c, d) + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    if ((t /= d) < (1 / 2.75)) {\n        return c * (7.5625 * t * t) + b;\n    } else if (t < (2 / 2.75)) {\n        return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;\n    } else if (t < (2.5 / 2.75)) {\n        return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;\n    } else {\n        return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;\n    }\n  }\n};\n","import { Ticker, TickerThread } from '@smoovy/ticker';\n\nimport * as easings from './easing';\nimport { EasingImplementation } from './easing';\n\nexport interface TweenTarget {\n  [key: string]: number | any;\n}\n\nexport interface TweenCallbacks<V> {\n  stop: () => void;\n  pause: () => void;\n  start: () => void;\n  reset: () => void;\n  delay: (passed: number) => void;\n  update: (values: V, progress: number) => void;\n  overwrite: () => void;\n  complete: () => void;\n}\n\nexport interface TweenOptions<V> {\n  easing: EasingImplementation;\n  delay: number;\n  duration: number;\n  mutate: boolean;\n  paused: boolean;\n  overwrite: boolean;\n  on: Partial<TweenCallbacks<V>>;\n}\n\nfunction getChanges<T extends TweenTarget>(\n  from: T,\n  to: Partial<T>\n) {\n  const changes = {} as typeof to;\n\n  for (const key in from) {\n    if (from.hasOwnProperty(key) && to.hasOwnProperty(key)) {\n      const change = (to[key] as number) - from[key];\n\n      if (change !== 0) {\n        changes[key] = change as any;\n      }\n    }\n  }\n\n  return changes;\n}\n\nexport class Tween<T extends TweenTarget = any> {\n  public static ticker = new Ticker();\n  private static registry = new WeakMap<TweenTarget, Tween>();\n  private registry = Tween.registry;\n  private ticker = Tween.ticker;\n  private thread?: TickerThread;\n  private delay?: TickerThread;\n  private changes: Partial<T> = {};\n  private stableTarget: T;\n  private currentTarget: T;\n  private firstTick = false;\n  private _paused = false;\n  private _complete = false;\n  private _passed = 0;\n\n  public constructor(\n    public target: T,\n    public values: Partial<T>,\n    protected options: Partial<TweenOptions<T>>\n  ) {\n    this.stableTarget = { ...target };\n\n    this.createThread();\n  }\n\n  public static fromTo<T extends TweenTarget>(\n    fromTarget: T,\n    toValues: Partial<T>,\n    options: Partial<TweenOptions<T>> = {}\n  ): Tween<T> {\n    return new Tween(fromTarget, toValues, options);\n  }\n\n  public get easing() {\n    return this.options.easing || easings.Circ.out;\n  }\n\n  public get duration() {\n    return typeof this.options.duration === 'number'\n      ? this.options.duration\n      : 100;\n  }\n\n  public get paused() {\n    return this._paused;\n  }\n\n  public get complete() {\n    return this._complete;\n  }\n\n  public get passed() {\n    return this._passed;\n  }\n\n  public set passed(ms: number) {\n    this._passed = Math.min(ms, this.duration);\n\n    this.handleTick(this.currentTarget);\n  }\n\n  public get progress() {\n    return this.passed / this.duration;\n  }\n\n  public set progress(percent: number) {\n    this.passed = this.duration * percent;\n  }\n\n  private  runCallback<V>(\n    name: keyof TweenCallbacks<V>,\n    ...args: any[]\n  ) {\n    if (this.options.on && typeof this.options.on[name] === 'function') {\n      (this.options.on[name] as any).apply(this, args);\n    }\n  }\n\n  private createDelay(ms: number) {\n    const start = Ticker.now();\n\n    return this.delay = this.ticker.add(\n      (_delta, time, kill) => {\n        if (this._paused) {\n          return;\n        }\n\n        const passed = time - start;\n\n        if (passed >= ms) {\n          this.runCallback('delay', ms);\n          delete this.delay;\n          kill();\n        } else {\n          this.runCallback('delay', passed);\n        }\n      }\n    );\n  }\n\n  private overwriteTarget(target: T) {\n    const tween = this.registry.get(target);\n\n    if (tween instanceof Tween) {\n      tween.stop();\n      this.registry.delete(target);\n      this.runCallback('overwrite');\n    }\n  }\n\n  private createThread()  {\n    if (this.thread && ! this.thread.dead) {\n      this.thread.kill();\n    }\n\n    this.changes = getChanges(this.target, this.values);\n    this.currentTarget = this.options.mutate === false\n    ? { ...this.target }\n    : this.target;\n\n    const changed = Object.keys(this.changes).length !== 0;\n\n    if (this.options.overwrite !== false) {\n      this.overwriteTarget(this.target);\n    }\n\n    this.registry.set(this.target, this);\n    this.firstTick = true;\n    this._complete = false;\n    this._passed = 0;\n\n    if (this.options.paused === true) {\n      this.pause();\n    }\n\n    if (this.delay) {\n      this.delay.kill();\n      delete this.delay;\n    }\n\n    if (typeof this.options.delay === 'number') {\n      this.runCallback('update', this.currentTarget, this.progress);\n      this.createDelay(this.options.delay);\n    }\n\n    return this.thread = this.ticker.add((delta, _time, kill) => {\n      if (this._paused || this.delay) {\n        return;\n      }\n\n      if ( ! changed) {\n        kill();\n        return;\n      }\n\n      this.passed += delta / Tween.ticker.intervalMs;\n    });\n  }\n\n  private handleTick(target: T) {\n    if (this.firstTick) {\n      this.runCallback('start');\n      this.firstTick = false;\n    }\n\n    /* istanbul ignore else */\n    if (this.passed >= 0) {\n      this.processChanges(target, (prop) => this.easing.call(\n        this,\n        this._passed,\n        this.stableTarget[prop],\n        this.changes[prop] as number,\n        this.duration\n      ));\n    }\n\n    /* istanbul ignore else */\n    if (this._passed >= 0 && this._passed >= this.duration) {\n      /* istanbul ignore else */\n      if (this.thread && ! this.thread.dead) {\n        this.thread.kill();\n      }\n\n      this.processChanges(target, (prop) => this.values[prop] as number);\n      this.runCallback('complete');\n\n      this._complete = true;\n    }\n  }\n\n  private processChanges(\n    targetTo: T,\n    value: (key: string) => number\n  ) {\n    for (const prop in this.changes) {\n      /* istanbul ignore else */\n      if (this.changes.hasOwnProperty(prop)) {\n        targetTo[prop] = value(prop) as any;\n      }\n    }\n\n    this.runCallback('update', targetTo, this.progress);\n  }\n\n  public stop() {\n    if (this.thread && ! this.thread.dead) {\n      this.thread.kill();\n\n      this.runCallback('stop');\n    }\n\n    return this;\n  }\n\n  public start() {\n    if (this._paused) {\n      this._paused = false;\n\n      /* istanbul ignore else */\n      if (this.thread && ! this.thread.dead) {\n        this.runCallback('start');\n      }\n    }\n\n    return this;\n  }\n\n  public pause() {\n    if ( ! this._paused) {\n      this._paused = true;\n\n      if (this.thread && ! this.thread.dead) {\n        this.runCallback('pause');\n      }\n    }\n\n    return this;\n  }\n\n  public reset() {\n    if (this.options.mutate !== false) {\n      for (const x in this.stableTarget) {\n        /* istanbul ignore else */\n        if (this.stableTarget.hasOwnProperty(x)) {\n          this.target[x] = this.stableTarget[x];\n        }\n      }\n    }\n\n    this.runCallback('reset');\n    this.createThread();\n\n    return this;\n  }\n}\n","import { listenCompose, listenEl, Unlisten } from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\nimport { Tween } from '@smoovy/tween';\nimport { isNum } from '@smoovy/utils';\n\nimport {\n  ScrollBehavior, ScrollerEvent, ScrollToEvent, TweenToEvent,\n} from '../core';\nimport { getDeltaByKeyEvent } from '../utils/keyboard';\n\ninterface Config {\n  /**\n   * The target to put all the events on\n   * Default: Window\n   */\n  target?: Window | HTMLElement;\n\n  /**\n   * The condition to dermine whether\n   * the native mode should be active or not\n   * Default: () => false\n   */\n  condition?: () => boolean;\n}\n\nconst defaultConfig = {\n  condition: () => false\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n  let self: ReturnType<ScrollBehavior>;\n\n  return self = (scroller) => {\n    const target = cfg.target || window;\n    const detachedBehaviors: string[] = [];\n    let unlisten: Unlisten | undefined;\n\n    const getPos = () => {\n      const x = target === window\n        ? target.scrollX\n        : (target as HTMLElement).scrollLeft;\n\n      const y = target === window\n        ? target.scrollY\n        : (target as HTMLElement).scrollTop;\n\n      return { x, y };\n    };\n\n    const check = () => {\n      if (cfg.condition()) {\n        scroller.behaviors.forEach((b, name) => {\n          if (b !== self) {\n            scroller.detachBehavior(name);\n            detachedBehaviors.push(name);\n          }\n        });\n\n        unlisten = listenCompose(\n          listenEl(target, 'scroll', () => {\n            const pos = getPos();\n\n            scroller.emit(ScrollerEvent.DELTA, {\n              x: scroller.position.virtual.x - pos.x,\n              y: scroller.position.virtual.y - pos.y\n            });\n          }),\n          scroller.on<ScrollToEvent>(ScrollerEvent.SCROLL_TO, ({ pos }) => {\n            if (isNum(pos.x) || isNum(pos.y)) {\n              const defPos = getPos();\n\n              target.scrollTo(\n                isNum(pos.x) ? pos.x as number : defPos.x,\n                isNum(pos.y) ? pos.y as number : defPos.y\n              );\n            }\n          })\n        );\n\n        scroller.on<TweenToEvent>(\n          ScrollerEvent.TWEEN_TO,\n          ({ pos, options }) => {\n            const force = !!options.force;\n            let tween: Tween | undefined;\n            const shallowStop = () => {\n              if (tween && ! force) {\n                tween.stop();\n                tween = undefined;\n              }\n            };\n\n            const unlistenTween = listenCompose(\n              listenEl(window, 'touchstart', shallowStop),\n              listenEl(window, 'wheel', shallowStop),\n              listenEl(window, 'keydown', (event) => {\n                const delta = getDeltaByKeyEvent(event);\n\n                if (event.key === 'Tab' || delta.x !== 0 || delta.y !== 0) {\n                  shallowStop();\n                }\n              })\n            );\n\n            tween = Tween.fromTo(scroller.position.virtual, pos, {\n              mutate: false,\n              duration: options.duration,\n              easing: options.easing,\n              on: {\n                update: (newPos) => window.scrollTo(newPos.x, newPos.y),\n                complete: unlistenTween,\n                stop: unlistenTween\n              }\n            });\n          }\n        );\n      } else if (detachedBehaviors.length > 0) {\n        if (unlisten) {\n          unlisten();\n          unlisten = undefined;\n        }\n\n        detachedBehaviors.forEach(name => scroller.attachBehavior(name));\n        Ticker.requestAnimationFrame(() => scroller.dom.recalc());\n      }\n    };\n\n    setTimeout(() => check());\n    scroller.on(ScrollerEvent.RECALC, () => check());\n  };\n};\n\nexport { Config as BypassNativeConfig };\nexport default behavior;\n","import { EventEmitter } from '@smoovy/event';\nimport {\n  ElementObserver, ElementObserverConfig, ElementState,\n} from '@smoovy/observer';\n\nexport interface ScrollerDomElement {\n  container: HTMLElement | ElementState;\n  wrapper: HTMLElement | ElementState;\n}\n\nexport interface ScrollerDomConfig {\n  observer?: ElementObserverConfig | false;\n  element: HTMLElement | ScrollerDomElement;\n}\n\nexport enum ScrollerDomEvent {\n  RECALC = 'recalc'\n}\n\nexport class ScrollerDom extends EventEmitter {\n  public container: ElementState;\n  public wrapper: ElementState;\n  public observer: ElementObserver;\n  private dynamic = false;\n\n  public constructor(protected config: ScrollerDomConfig) {\n    super();\n\n    this.dynamic = config.element instanceof HTMLElement;\n\n    if (config.observer !== false) {\n      this.observer = new ElementObserver(config.observer);\n    }\n\n    this.container = new ElementState(this.dynamic\n      ? document.createElement('div')\n      : (config.element as ScrollerDomElement).container\n    );\n\n    this.wrapper = new ElementState(this.dynamic\n      ? document.createElement('div')\n      : (config.element as ScrollerDomElement).wrapper\n    );\n\n    if (this.observer) {\n      this.container = this.observer.observe(this.container);\n      this.wrapper = this.observer.observe(this.wrapper);\n\n      this.wrapper.changed(() => this.emit(ScrollerDomEvent.RECALC));\n      this.container.changed(() => this.emit(ScrollerDomEvent.RECALC));\n    }\n\n    if (this.dynamic) {\n      this.container.element.className += 'smoovy-container';\n      this.wrapper.element.className += 'smoovy-wrapper';\n\n      this.container.element.appendChild(this.wrapper.element);\n    }\n  }\n\n  public recalc(async = false) {\n    this.wrapper.update(async);\n    this.container.update(async);\n  }\n\n  public attach() {\n    if (this.dynamic) {\n      const rootElement = this.config.element as HTMLElement;\n      const children = Array.from(rootElement.childNodes);\n\n      rootElement.appendChild(this.container.element);\n      this.wrapper.element.append(...children);\n    }\n  }\n\n  public detach() {\n    if (this.dynamic) {\n      const rootElement = this.config.element as HTMLElement;\n      const children = Array.from(this.wrapper.element.childNodes);\n\n      rootElement.append(...children);\n      rootElement.removeChild(this.container.element);\n    }\n  }\n}\n","import {\n  EventEmitter, EventListenerCb, listenCompose, Unlisten,\n} from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\nimport { TweenOptions } from '@smoovy/tween';\nimport { Coordinate, isNum } from '@smoovy/utils';\n\nimport { ScrollerDom, ScrollerDomConfig, ScrollerDomEvent } from './dom';\n\nexport type ScrollBehavior<C = any> = (config?: C) => ScrollBehaviorItem;\nexport type ScrollBehaviorItemDetach = (() => void)|void;\nexport type ScrollBehaviorItem<S extends Scroller = Scroller> =\n  (scroller: S) => ScrollBehaviorItemDetach;\n\nexport interface ScrollerPosition {\n  virtual: Coordinate;\n  output: Coordinate;\n}\n\nexport type DeltaTransformCallback = (delta: Coordinate) => Coordinate;\nexport type VirtualTransformCallback = (pos: Coordinate) => Coordinate;\nexport interface OutputTransformEvent {\n  pos: Coordinate;\n  step: (pos: Coordinate) => void;\n}\n\nexport interface TweenToEvent {\n  pos: Partial<Coordinate>;\n  options: Partial<\n    Pick<TweenOptions<any>, 'duration' | 'easing'> &\n    { force: boolean }\n  >;\n}\n\nexport interface ScrollToEvent {\n  pos: Partial<Coordinate>;\n  skipOutputTransform: boolean;\n}\n\nexport enum ScrollerEvent {\n  DELTA = 'delta',\n  OUTPUT = 'output',\n  VIRTUAL = 'virtual',\n  RECALC = 'recalc',\n  TWEEN_TO = 'tween_to',\n  SCROLL_TO = 'scroll_to',\n  TRANSFORM_DELTA = '~delta',\n  TRANSFORM_VIRTUAL = '~virtual',\n  TRANSFORM_OUTPUT = '~output'\n}\n\nexport type ScrollerDomType = HTMLElement | ScrollerDomConfig | ScrollerDom;\n\nexport class Scroller extends EventEmitter {\n  private attached = false;\n  private locks: string[] = [];\n  private availableBehaviors = new Map<string, ScrollBehaviorItem>();\n  private attachedBehaviors = new Map<string, ScrollBehaviorItemDetach>();\n  private unlisten: Unlisten;\n  public dom: ScrollerDom;\n  public position: ScrollerPosition = {\n    output: { x: 0, y: 0 },\n    virtual: { x: 0, y: 0 }\n  };\n\n  public constructor(\n    dom: ScrollerDomType,\n    behaviors: { [name: string]: ScrollBehaviorItem }\n  ) {\n    super();\n\n    if (dom instanceof ScrollerDom) {\n      this.dom = dom;\n    } else {\n      this.dom = new ScrollerDom(\n        dom instanceof HTMLElement\n          ? { element: dom }\n          : dom\n      );\n    }\n\n    for (const name in behaviors) {\n      if (behaviors.hasOwnProperty(name)) {\n        this.setBehavior(name, behaviors[name]);\n      }\n    }\n\n    this.attach();\n  }\n\n  private attach() {\n    if ( ! this.attached) {\n      this.attached = true;\n      this.unlisten = listenCompose(\n        this.dom.on<Coordinate>(ScrollerDomEvent.RECALC, () => {\n          this.updateDelta({ x: 0, y: 0 });\n          Ticker.requestAnimationFrame(() => this.emit(ScrollerEvent.RECALC));\n        }),\n        this.on<Coordinate>(ScrollerEvent.DELTA, (delta) => {\n          if ( ! this.isLocked()) {\n            this.updateDelta(delta);\n          }\n        })\n      );\n\n      this.dom.attach();\n      this.availableBehaviors.forEach((_behavior, key) => {\n        this.attachBehavior(key);\n      });\n    }\n  }\n\n  public destroy() {\n    if (this.attached) {\n      this.attached = false;\n\n      if (typeof this.unlisten === 'function') {\n        this.unlisten();\n        delete this.unlisten;\n      }\n\n      this.dom.detach();\n      this.attachedBehaviors.forEach(detach => {\n        if (typeof detach === 'function') {\n          detach.call(this);\n        }\n      });\n    }\n  }\n\n  public recalc(async = false) {\n    this.dom.recalc(async);\n\n    if (async) {\n      Ticker.requestAnimationFrame(() => this.emit(ScrollerEvent.RECALC));\n    } else {\n      this.emit(ScrollerEvent.RECALC);\n    }\n  }\n\n  public get behaviors() {\n    return this.availableBehaviors;\n  }\n\n  public setBehavior(\n    name: string,\n    behavior: ScrollBehaviorItem\n  ) {\n    this.availableBehaviors.set(name, behavior);\n  }\n\n  public deleteBehavior(name: string) {\n    if (this.attachedBehaviors.has(name)) {\n      this.detachBehavior(name);\n    }\n\n    return this.availableBehaviors.delete(name);\n  }\n\n  public attachBehavior(name: string) {\n    const behavior = this.availableBehaviors.get(name);\n\n    if (behavior && ! this.attachedBehaviors.get(name)) {\n      this.attachedBehaviors.set(name, behavior(this));\n\n      return true;\n    }\n\n    return false;\n  }\n\n  public detachBehavior(name: string) {\n    const detach = this.attachedBehaviors.get(name);\n\n    if (detach) {\n      detach.call(this);\n      this.attachedBehaviors.delete(name);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  public updateDelta<T extends Partial<Coordinate>>(delta: T) {\n    const virtPos = this.position.virtual;\n\n    this.emit<T>(\n      ScrollerEvent.TRANSFORM_DELTA,\n      delta,\n      (newDelta) => {\n        delta.x = newDelta.x;\n        delta.y = newDelta.y;\n      }\n    );\n\n    this.updatePosition({\n      x: isNum(delta.x) ? virtPos.x - (delta.x as number) : undefined,\n      y: isNum(delta.y) ? virtPos.y - (delta.y as number) : undefined\n    });\n  }\n\n  protected updatePosition(virtPos?: Partial<Coordinate>) {\n    if (virtPos && isNum(virtPos.x)) {\n      this.position.virtual.x = virtPos.x as number;\n    }\n\n    if (virtPos && isNum(virtPos.y)) {\n      this.position.virtual.y = virtPos.y as number;\n    }\n\n    this.emit(ScrollerEvent.VIRTUAL, this.position.virtual);\n    this.emit<Coordinate>(\n      ScrollerEvent.TRANSFORM_VIRTUAL,\n      this.position.virtual,\n      (newPos) => {\n        this.position.virtual.x = newPos.x;\n        this.position.virtual.y = newPos.y;\n      }\n    );\n\n    if (\n      this.isEventMuted(ScrollerEvent.TRANSFORM_OUTPUT) ||\n      ! this.hasEventListeners(ScrollerEvent.TRANSFORM_OUTPUT)\n    ) {\n      this.updateOutput(this.position.virtual);\n    } else {\n      this.emit<OutputTransformEvent>(\n        ScrollerEvent.TRANSFORM_OUTPUT,\n        {\n          pos: this.position.output,\n          step: (outPos) => this.updateOutput(outPos)\n        }\n      );\n    }\n  }\n\n  protected updateOutput(pos: Coordinate) {\n    this.position.output.x = pos.x;\n    this.position.output.y = pos.y;\n\n    this.emit(ScrollerEvent.OUTPUT, pos);\n  }\n\n  public lock(name = 'default', enable = true) {\n    if ( ! this.locks.includes(name) && enable) {\n      this.locks.push(name);\n    } else if ( ! enable) {\n      this.unlock(name);\n    }\n  }\n\n  public unlock(name = 'default') {\n    const index = this.locks.indexOf(name);\n\n    if (index > -1) {\n      this.locks.splice(index, 1);\n    }\n  }\n\n  public isLocked(name?: string) {\n    if (name) {\n      return this.locks.includes(name);\n    }\n\n    return this.locks.length > 0;\n  }\n\n  public scrollTo(\n    pos: Partial<Coordinate>,\n    skipOutputTransform = false\n  ) {\n    this.emit<ScrollToEvent>(\n      ScrollerEvent.SCROLL_TO,\n      { pos, skipOutputTransform }\n    );\n  }\n\n  public tweenTo(\n    pos: Partial<Coordinate>,\n    options: TweenToEvent['options'] = {}\n  ) {\n    this.emit<TweenToEvent>(\n      ScrollerEvent.TWEEN_TO,\n      { pos, options }\n    );\n  }\n\n  public onVirtual(cb: EventListenerCb<Coordinate>) {\n    return this.on(ScrollerEvent.VIRTUAL, cb);\n  }\n\n  public onScroll(cb: EventListenerCb<Coordinate>) {\n    return this.on(ScrollerEvent.OUTPUT, cb);\n  }\n\n  public onDelta(cb: EventListenerCb<Coordinate>) {\n    return this.on(ScrollerEvent.DELTA, cb);\n  }\n}\n","import { listenCompose, listenEl } from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\nimport { Browser } from '@smoovy/utils';\n\ninterface Config {\n  /**\n   * Ignore focused elements within the given elements\n   * Default: []\n   */\n  ignoreInside?: HTMLElement[];\n\n  /**\n   * The target to set the focus listener onto\n   * Default: window\n   */\n  focusTarget?: Window | Document | HTMLElement;\n\n  /**\n   * Use native mode. This will trigger the scroll events on\n   * a defined target instead of the scroller directly\n   */\n  nativeTarget?: Window | HTMLElement;\n}\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => (scroller) => {\n  const focusTarget = config.focusTarget || Browser.client ? window : undefined;\n  const container = scroller.dom.container.element;\n  const ignoreIn = config.ignoreInside || [];\n  const scrollListener = (event: Event) => {\n    event.preventDefault();\n\n    container.scrollLeft = container.scrollTop = 0;\n  };\n\n  const focusListener = (event: FocusEvent) => {\n    Ticker.requestAnimationFrame(() => {\n      const activeEl = event.target;\n\n      if ( ! (activeEl instanceof HTMLElement)) {\n        return;\n      }\n\n      const ignore = ignoreIn.map(el => el.contains(activeEl)).includes(true);\n\n      if (\n        ! ignore &&\n        activeEl &&\n        container.contains(activeEl)\n        || container === activeEl\n      ) {\n        const bounds = activeEl.getBoundingClientRect();\n        const targetSize = scroller.dom.container.size;\n\n        if (\n          bounds.top <= 0 || bounds.top >= targetSize.height ||\n          bounds.left <= 0 || bounds.right >= targetSize.width\n        ) {\n          if (config.nativeTarget) {\n            const position = scroller.position.virtual;\n\n            config.nativeTarget.scrollTo(\n              position.x + bounds.left - targetSize.width / 2,\n              position.y + bounds.top - targetSize.height / 2\n            );\n          } else {\n            scroller.emit(ScrollerEvent.DELTA, {\n              y: -bounds.top + targetSize.height / 2,\n              x: -bounds.left + targetSize.width / 2\n            });\n          }\n        }\n      }\n    });\n  };\n\n  return listenCompose(\n    listenEl(container, 'scroll', scrollListener),\n    focusTarget\n      ? listenEl(focusTarget, 'focus', focusListener, true)\n      : undefined\n  );\n};\n\nexport { Config as BypassFocusConfig };\nexport default behavior;\n","import { Coordinate } from '@smoovy/utils';\n\nexport function getDeltaByKeyEvent(\n  event: KeyboardEvent,\n  arrowDelta = 100,\n  pageDelta = 250,\n  spaceDelta = 200,\n  homeEndDelta = Infinity\n) {\n  const delta: Coordinate = { x: 0, y: 0 };\n\n  switch (event.key) {\n    case ' ':\n      delta.y = -spaceDelta;\n      break;\n\n    case 'ArrowLeft':\n      delta.x = arrowDelta;\n      break;\n\n    case 'ArrowRight':\n      delta.x = -arrowDelta;\n      break;\n\n    case 'ArrowDown':\n      delta.y = -arrowDelta;\n      break;\n\n    case 'ArrowUp':\n      delta.y = arrowDelta;\n      break;\n\n    case 'PageDown':\n      delta.y = -pageDelta;\n      break;\n\n    case 'PageUp':\n      delta.y = pageDelta;\n      break;\n\n    case 'Home':\n      delta.y = homeEndDelta;\n      break;\n\n    case 'End':\n      delta.y = -homeEndDelta;\n      break;\n  }\n\n  return delta;\n}\n","import { clamp, Coordinate } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\n\nconst behavior: ScrollBehavior = () => (scroller) => {\n  return scroller.on<Coordinate>(\n    ScrollerEvent.TRANSFORM_VIRTUAL,\n    (virtual) => {\n      const wSize = scroller.dom.wrapper.size;\n      const cSize = scroller.dom.container.size;\n      const maxScrollX = Math.max(wSize.width - cSize.width, 0);\n      const maxScrollY = Math.max(wSize.height - cSize.height, 0);\n\n      return {\n        x: clamp(virtual.x, 0, maxScrollX),\n        y: clamp(virtual.y, 0, maxScrollY)\n      };\n    }\n  );\n};\n\nexport default behavior;\n","import { listenEl } from '@smoovy/event';\nimport { Browser } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\nimport { getDeltaByKeyEvent } from '../utils/keyboard';\n\ninterface Config {\n  /**\n   * A target element on which the event listeners will be placed\n   * Default: `document.documentElement`\n   */\n  target?: HTMLElement;\n\n  /**\n   * Whether passive events are enabled or not.\n   * Default: false\n   */\n  passive?: boolean;\n\n  /**\n   * The keyboard event on which to trigger the emission\n   * Default: keydown\n   */\n  eventName?: keyof HTMLElementEventMap;\n\n  /**\n   * The delta value for the arrow keys\n   * Default: 100\n   */\n  arrowDelta?: number;\n\n  /**\n   * The page up & down delta value\n   * Default: 250\n   */\n  pageDelta?: number;\n\n  /**\n   * The delta value for the space key\n   * Default: 150\n   */\n  spaceDelta?: number;\n\n  /**\n   * The delta value for home and end\n   * Default: Infinity\n   */\n  homeEndDelta?: number;\n}\n\nconst defaultConfig = {\n  passive: false,\n  target: Browser.client ? document.documentElement : undefined,\n  eventName: 'keydown',\n  arrowDelta: 100,\n  pageDelta: 250,\n  spaceDelta: 200,\n  homeEndDelta: Infinity\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    const target = cfg.target as HTMLElement;\n    const listener = (event: KeyboardEvent) => {\n      const delta = getDeltaByKeyEvent(\n        event,\n        cfg.arrowDelta,\n        cfg.pageDelta,\n        cfg.spaceDelta,\n        cfg.homeEndDelta\n      );\n\n      if (delta.x || delta.y) {\n        scroller.emit(ScrollerEvent.DELTA, delta);\n      }\n    };\n\n    return Browser.wheelEvent\n      ? listenEl(\n          target,\n          cfg.eventName,\n          listener as any,\n          { passive: config.passive }\n        )\n      : undefined;\n  };\n};\n\nexport { Config as KeyboardConfig };\nexport default behavior;\n","import { Ticker, TickerThread } from '@smoovy/ticker';\nimport { Browser, cutDec, lerp } from '@smoovy/utils';\n\nimport { OutputTransformEvent, ScrollBehavior, ScrollerEvent } from '../core';\n\ninterface Config {\n  /**\n   * The damping used for the linear interpolation\n   * The lower this value the smoother the animation\n   * Default: 0.1\n   */\n  damping?: number;\n\n  /**\n   * The damping for mobile (touch) devices\n   * Default: 0.18\n   */\n  mobileDamping?: number;\n\n  /**\n   * The value on which to decide when to stop the lerp calculations\n   * Default: 0.009\n   */\n  precision?: number;\n\n  /**\n   * A custom ticker to use for the animation\n   */\n  ticker?: Ticker;\n}\n\nconst defaultConfig = {\n  damping: 0.1,\n  precision: 0.009,\n  mobileDamping: 0.18,\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    let thread: TickerThread;\n    const ticker = cfg.ticker || new Ticker();\n    const damping = Browser.mobile ? cfg.mobileDamping : cfg.damping;\n    const unlisten = scroller.on<OutputTransformEvent>(\n      ScrollerEvent.TRANSFORM_OUTPUT,\n      ({ pos, step }) => {\n        if (thread) {\n          thread.kill();\n        }\n\n        thread = ticker.add((_delta, _time, kill) => {\n          const virtual = scroller.position.virtual;\n          const outputX = lerp(pos.x, virtual.x, damping);\n          const outputY = lerp(pos.y, virtual.y, damping);\n          const diffX = Math.abs(virtual.x - outputX);\n          const diffY = Math.abs(virtual.y - outputY);\n\n          if (diffX < cfg.precision && diffY < cfg.precision) {\n            kill();\n          }\n\n          step({ x: outputX, y: outputY });\n        });\n      }\n    );\n\n    return () => {\n      unlisten();\n      ticker.kill();\n    };\n  };\n};\n\nexport { Config as LerpContentConfig };\nexport default behavior;\n","import { listenEl } from '@smoovy/event';\nimport { Browser } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\n\ninterface Config {\n  /**\n   * A target element on which the event listeners will be placed\n   * Default: `document.documentElement`\n   */\n  target?: HTMLElement;\n\n  /**\n   * Whether passive events are enabled or not.\n   * Default: false\n   */\n  passive?: boolean;\n\n  /**\n   * The multiplier used on the delta value.\n   * Default: 1\n   */\n  multiplier?: number;\n\n  /**\n   * The multiplier used on the delta value for firefox browsers\n   * Default: 25\n   */\n  multiplierFirefox?: number;\n}\n\nconst defaultConfig = {\n  passive: false,\n  multiplier: 1,\n  multiplierFirefox: 25\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    const target = cfg.target || document.documentElement;\n    const listener = (event: WheelEvent) => {\n      const delta = { x: 0, y: 0 };\n\n      if ( ! config.passive) {\n        event.preventDefault();\n      }\n\n      delta.x = (event as any).wheelDeltaX || event.deltaX * -1;\n      delta.y = (event as any).wheelDeltaY || event.deltaY * -1;\n      delta.x *= cfg.multiplier;\n      delta.y *= cfg.multiplier;\n\n\n      if (Browser.firefox && event.deltaMode === 1) {\n        delta.x *= cfg.multiplierFirefox;\n        delta.y *= cfg.multiplierFirefox;\n      }\n\n      scroller.emit(ScrollerEvent.DELTA, delta);\n    };\n\n    return Browser.wheelEvent\n      ? listenEl(target, 'wheel', listener, { passive: cfg.passive })\n      : undefined;\n  };\n};\n\nexport { Config as MouseWheelConfig };\nexport default behavior;\n","import { Unlisten } from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\nimport { Coordinate } from '@smoovy/utils';\n\nimport {\n  ScrollBehavior as SmoovyScrollBehavior, ScrollerEvent, ScrollToEvent,\n} from '../core';\n\ninterface Config {\n  /**\n   * Use native mode. This will trigger the scroll events on\n   * a defined target instead of the scroller directly\n   */\n  nativeTarget?: Window | HTMLElement;\n\n  /**\n   * The scroll behavior to use for the native target\n   * Default: smooth\n   */\n  nativeBehavior?: ScrollBehavior;\n}\n\nconst behavior: SmoovyScrollBehavior<Config> = (config = {}) => (scroller) => {\n  return scroller.on<ScrollToEvent>(ScrollerEvent.SCROLL_TO, (event) => {\n    let unmute: Unlisten;\n\n    if (event.skipOutputTransform) {\n      unmute = scroller.muteEvents(ScrollerEvent.TRANSFORM_OUTPUT);\n    }\n\n    const virtual = scroller.position.virtual;\n\n    if (config.nativeTarget) {\n      const position: ScrollToOptions = {};\n\n      if (typeof event.pos.x === 'number') {\n        position.left = event.pos.x;\n      }\n\n      if (typeof event.pos.y === 'number') {\n        position.top = event.pos.y;\n      }\n\n      config.nativeTarget.scrollTo({\n        behavior: config.nativeBehavior || 'smooth',\n        ...position\n      });\n    } else {\n      const delta: Partial<Coordinate> = {};\n\n      if (typeof event.pos.x === 'number') {\n        delta.x = -(event.pos.x - virtual.x);\n      }\n\n      if (typeof event.pos.y === 'number') {\n        delta.y = -(event.pos.y - virtual.y);\n      }\n\n      scroller.updateDelta(delta);\n    }\n\n    Ticker.requestAnimationFrame(() => {\n      if (unmute) {\n        unmute();\n      }\n    });\n  });\n};\n\nexport { Config as ScrollToConfig };\nexport default behavior;\n","import { ScrollBehavior } from '../core';\nimport { objectDeepMerge } from '@smoovy/utils';\n\ninterface Config {\n  /**\n   * The default styling of the container element\n   * Default: {\n   *   width: '100%',\n   *   height: '100%',\n   *   overflow: 'hidden'\n   * }\n   */\n  defaults?: Partial<{ [key: string]: string }>;\n}\n\nconst defaultConfig = {\n  defaults: {\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden'\n  }\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = objectDeepMerge(defaultConfig as Config, config);\n\n  return (scroller) => {\n    const target = scroller.dom.container.element;\n\n    for (const x in cfg.defaults) {\n      if (cfg.defaults.hasOwnProperty(x)) {\n        (target.style as any)[x] = cfg.defaults[x];\n      }\n    }\n\n    return () => {\n      for (const x in cfg.defaults) {\n        if (cfg.defaults.hasOwnProperty(x)) {\n          (target.style as any)[x] = '';\n        }\n      }\n    };\n  };\n};\n\nexport { Config as StyleContainerConfig };\nexport default behavior;\n","import { ScrollBehavior, ScrollerEvent } from '../core';\nimport { listenCompose, listenEl } from '@smoovy/event';\nimport { Ticker } from '@smoovy/ticker';\nimport { lerp, between } from '@smoovy/utils';\n\ninterface Config {\n  /**\n   * A target element on which the event listeners will be placed\n   * Default: `document.documentElement`\n   */\n  target?: HTMLElement;\n\n  /**\n   * Whether passive events are enabled or not.\n   * Default: false\n   */\n  passive?: boolean;\n\n  /**\n   * The multiplier used on the delta value\n   * Default: 1\n   */\n  deltaMultiplier?: number;\n\n  /**\n   * The multiplier used on the velocity values.\n   * Default: 20\n   */\n  velocityMultiplier?: number;\n\n  /**\n   * The inertia (damping) applied to the velocity\n   * Default: 0.08\n   */\n  velocityDamping?: number;\n\n  /**\n   * The minimum threshold range to enter before\n   * canceling the velocity to 0 and stopping\n   * the momentum animation\n   * Default: 2\n   */\n  minimumThreshold?: number;\n}\n\nconst defaultConfig = {\n  passive: false,\n  deltaMultiplier: 1,\n  velocityDamping: 0.08,\n  velocityMultiplier: 20,\n  minimumThreshold: 2\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    const doc = document.documentElement;\n    const target = cfg.target || doc;\n    const ticker = new Ticker();\n    const startPos = { x: 0, y: 0 };\n    const velocity = { x: 0, y: 0 };\n    const threshold = cfg.minimumThreshold;\n    let lastMove = 0;\n    let down = false;\n\n    const getTouch = (event: TouchEvent) => {\n      return (event.targetTouches ? event.targetTouches[0] : event) as Touch;\n    };\n\n    const handleTouchStart = (event: TouchEvent) => {\n      ticker.kill();\n\n      const touch = getTouch(event);\n\n      startPos.x = touch.pageX;\n      startPos.y = touch.pageY;\n\n      down = true;\n    };\n\n    const handleTouchEnd = () => {\n      if (down) {\n        if (velocity.x !== 0 || velocity.y !== 0) {\n          ticker.add((_delta, _time, kill) => {\n            velocity.x = lerp(velocity.x, 0, cfg.velocityDamping);\n            velocity.y = lerp(velocity.y, 0, cfg.velocityDamping);\n\n            scroller.emit(ScrollerEvent.DELTA, velocity);\n\n            if (\n              between(velocity.x, threshold, -threshold) &&\n              between(velocity.y, threshold, -threshold)\n            ) {\n              velocity.x = 0;\n              velocity.y = 0;\n\n              kill();\n            }\n          });\n        }\n      }\n\n      down = false;\n    };\n\n    const handleTouchMove = (event: TouchEvent) => {\n      if (down) {\n        event.preventDefault();\n\n        const delta = { x: 0, y: 0 };\n        const touch = getTouch(event);\n\n        delta.x = (touch.pageX - startPos.x) * cfg.deltaMultiplier;\n        delta.y = (touch.pageY - startPos.y) * cfg.deltaMultiplier;\n\n        const deltaTime = Ticker.now() - lastMove;\n\n        velocity.x = (startPos.x - touch.pageX) / deltaTime;\n        velocity.y = (startPos.y - touch.pageY) / deltaTime;\n        velocity.x *= -1 * cfg.velocityMultiplier;\n        velocity.y *= -1 * cfg.velocityMultiplier;\n\n        startPos.x = touch.pageX;\n        startPos.y = touch.pageY;\n        lastMove = Ticker.now();\n\n        scroller.emit(ScrollerEvent.DELTA, delta);\n      }\n    };\n\n    return listenCompose(\n      listenEl(\n        target,\n        'touchstart',\n        handleTouchStart,\n        { passive: cfg.passive }\n      ),\n      listenEl(doc, 'touchend', handleTouchEnd, { passive: cfg.passive }),\n      listenEl(doc, 'touchmove', handleTouchMove, { passive: cfg.passive }),\n    );\n  };\n};\n\nexport { Config as TouchInertiaConfig };\nexport default behavior;\n","import { Browser, Coordinate, cutDec } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\n\ninterface Config {\n  /**\n   * Since firefox has a problem with tweening transforms,\n   * this will add a little trick to prevent firefox from\n   * executing flickering animations by adding a 3d rotation\n   * of 0.01deg to the transform property.\n   * Default: true\n   */\n  firefoxFix?: boolean;\n\n  /**\n   * Whether the styles should be set initially\n   * Default: true\n   */\n  initialStyles?: boolean;\n\n  /**\n   * The decimal places to keep\n   * Default: 2\n   */\n  precision?: number;\n}\n\nconst defaultConfig = {\n  firefoxFix: true,\n  initialStyles: true,\n  precision: 2\n};\n\nconst updateTransform = (\n  element: HTMLElement,\n  posX = 0,\n  posY = 0,\n  rotate = false\n) => {\n  let transform = `translate3d(${-posX}px, ${-posY}px, 0)`;\n\n  if (rotate) {\n    transform += ` rotate3d(0.01, 0.01, 0.01, 0.01deg)`;\n  }\n\n  element.style.transform = transform;\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n  const firefoxFix = cfg.firefoxFix && Browser.firefox;\n\n  return (scroller) => {\n    const element = scroller.dom.wrapper.element;\n    const unlisten = scroller.on<Coordinate>(\n      ScrollerEvent.OUTPUT,\n      (pos) => {\n        const posX = cutDec(pos.x, cfg.precision);\n        const posY = cutDec(pos.y, cfg.precision);\n\n        updateTransform(element, posX, posY, firefoxFix);\n      }\n    );\n\n    if (cfg.initialStyles) {\n      updateTransform(element, 0, 0, firefoxFix);\n    }\n\n    return () => {\n      element.style.transform = '';\n      unlisten();\n    };\n  };\n};\n\nexport { Config as TranslateConfig };\nexport default behavior;\n","import { listenCompose, listenEl, Unlisten } from '@smoovy/event';\nimport { Tween } from '@smoovy/tween';\n\nimport { ScrollBehavior, ScrollerEvent, TweenToEvent } from '../core';\n\ninterface Config {\n  /**\n   * Use native mode. This will trigger the scroll events on\n   * a defined target instead of the scroller directly\n   */\n  nativeTarget?: Window | HTMLElement;\n\n  /**\n   * Events used to detect changes on the native targets.\n   * Default: [ 'wheel', 'touchmove' ]\n   */\n  nativeKillEvents?: (keyof HTMLElementEventMap)[];\n}\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => (scroller) => {\n  let currentTween: Tween | undefined;\n\n  return scroller.on<TweenToEvent>(\n    ScrollerEvent.TWEEN_TO,\n    ({ pos, options }) => {\n      const force = !!options.force;\n      const unlisten = listenCompose(\n        config.nativeTarget === undefined\n          ? listenCompose(\n              scroller.on(ScrollerEvent.DELTA, () => {\n                if (currentTween && ! force) {\n                  currentTween.stop();\n                }\n              }),\n              scroller.muteEvents(\n                ScrollerEvent.TRANSFORM_OUTPUT,\n                force && ScrollerEvent.DELTA\n              )\n            )\n          : listenEl(\n              config.nativeTarget,\n              config.nativeKillEvents || ['wheel', 'touchmove'],\n              () => {\n                if (currentTween && ! force) {\n                  currentTween.stop();\n                }\n              }\n            )\n      );\n\n      if (currentTween) {\n        currentTween.stop();\n      }\n\n      currentTween = Tween.fromTo(\n        scroller.position.virtual,\n        pos,\n        {\n          mutate: false,\n          duration: options.duration,\n          easing: options.easing,\n          on: {\n            update: (newPos) => {\n              if (config.nativeTarget) {\n                config.nativeTarget.scrollTo(newPos.x, newPos.y);\n              } else {\n                scroller.updateDelta({\n                  x: scroller.position.virtual.x - newPos.x,\n                  y: scroller.position.virtual.y - newPos.y\n                });\n              }\n            },\n            stop: () => {\n              unlisten();\n              currentTween = undefined;\n            },\n            complete: () => {\n              unlisten();\n              currentTween = undefined;\n            }\n          }\n        }\n      );\n    }\n  );\n};\n\nexport { Config as TweenToConfig };\nexport default behavior;\n","import { listenCompose, listenEl } from '@smoovy/event';\nimport { Browser } from '@smoovy/utils';\n\nimport { ScrollBehavior, ScrollerEvent } from '../core';\n\ninterface Config {\n  /**\n   * The target to set the scroll listeners on\n   * Default: window\n   */\n  target?: HTMLElement | Window;\n}\n\nconst defaultConfig = {\n  target: Browser.client ? window : undefined\n};\n\nconst behavior: ScrollBehavior<Config> = (config = {}) => {\n  const cfg = Object.assign(defaultConfig, config);\n\n  return (scroller) => {\n    const contentSpan = document.createElement('div');\n    const parentElement = scroller.dom.container.element.parentElement;\n    const updateSize = () => {\n      contentSpan.style.height = `${scroller.dom.wrapper.size.height}px`;\n    };\n\n    updateSize();\n\n    if (parentElement) {\n      parentElement.append(contentSpan);\n    }\n\n    return listenCompose(\n      () => contentSpan.remove(),\n      cfg.target\n        ? listenEl(cfg.target, 'scroll', () => (\n            scroller.emit(ScrollerEvent.DELTA, {\n              x: scroller.position.virtual.x - window.scrollX,\n              y: scroller.position.virtual.y - window.scrollY\n            }))\n          )\n        : undefined,\n      scroller.on(ScrollerEvent.RECALC, updateSize)\n    );\n  };\n};\n\nexport { Config as NativeScrollbarConfig };\nexport default behavior;\n","import { Browser } from '@smoovy/utils';\n\nimport * as coreBehaviors from './behaviors';\nimport { ScrollBehaviorItem, Scroller, ScrollerDomType } from './core';\n\nexport const smoothScroll = (\n  dom: ScrollerDomType,\n  config: {\n    lerp?: coreBehaviors.LerpContentConfig,\n    mouse?: coreBehaviors.MouseWheelConfig,\n    touch?: coreBehaviors.TouchInertiaConfig,\n    focus?: coreBehaviors.BypassFocusConfig,\n    styles?: coreBehaviors.StyleContainerConfig['defaults'],\n    keyboard?: coreBehaviors.KeyboardConfig,\n    translate?: coreBehaviors.TranslateConfig,\n    behaviors?: { [name: string]: ScrollBehaviorItem }\n  } = {},\n) => new Scroller(dom, {\n  clampContent: coreBehaviors.clampContent(),\n  tweenTo: coreBehaviors.tweenTo(),\n  scrollTo: coreBehaviors.scrollTo(),\n  bypassFocus: coreBehaviors.bypassFocus(config.focus),\n  styleContainer: coreBehaviors.styleContainer({ defaults: config.styles }),\n  touchInertia: coreBehaviors.touchInertia(config.touch),\n  lerpContent: coreBehaviors.lerpContent(config.lerp),\n  mouseWheel: coreBehaviors.mouseWheel(config.mouse),\n  translate: coreBehaviors.translate(config.translate),\n  keyboard: coreBehaviors.keyboard(config.keyboard),\n  ...(config.behaviors || {})\n});\n\nexport const nativeSmoothScroll = (\n  dom: ScrollerDomType,\n  config: {\n    lerp?: coreBehaviors.LerpContentConfig,\n    focus?: coreBehaviors.BypassFocusConfig,\n    styles?: coreBehaviors.StyleContainerConfig['defaults'],\n    scrollTo?: coreBehaviors.ScrollToConfig,\n    tweenTo?: coreBehaviors.TweenToConfig,\n    translate?: coreBehaviors.TranslateConfig,\n    native?: coreBehaviors.BypassNativeConfig,\n    scrollbar?: coreBehaviors.NativeScrollbarConfig,\n    behaviors?: { [name: string]: ScrollBehaviorItem }\n  } = {}\n) => new Scroller(dom, {\n  clampContent: coreBehaviors.clampContent(),\n  nativeScrollbar: coreBehaviors.nativeScrollbar(config.scrollbar),\n  lerpContent: coreBehaviors.lerpContent(config.lerp),\n  bypassNative: coreBehaviors.bypassNative({\n    condition: () => Browser.mobile,\n    ...config.native\n  }),\n  translate: coreBehaviors.translate(config.translate),\n  tweenTo: coreBehaviors.tweenTo({\n    nativeTarget: Browser.client ? window : undefined,\n    ...config.tweenTo\n  }),\n  scrollTo: coreBehaviors.scrollTo({\n    nativeTarget: Browser.client ? window : undefined,\n    ...config.scrollTo\n  }),\n  bypassFocus: coreBehaviors.bypassFocus({\n    nativeTarget: Browser.client ? window : undefined,\n    ...config.focus\n  }),\n  styleContainer: coreBehaviors.styleContainer({\n    defaults: {\n      position: 'fixed',\n      left: '0px',\n      top: '0px',\n      width: '100%',\n      height: '100%',\n      ...config.styles\n    }\n  }),\n  ...(config.behaviors || {})\n});\n","import {\r\n    nativeSmoothScroll\r\n} from '@smoovy/scroller';\r\n\r\nwindow.onload = () => {\r\n    console.log('Spirit ~ Siddharth S.')\r\n    const mainEl = document.querySelector('.scroll-wrapper');\r\n    const scroller = nativeSmoothScroll({\r\n        element: mainEl\r\n    });\r\n}"]}